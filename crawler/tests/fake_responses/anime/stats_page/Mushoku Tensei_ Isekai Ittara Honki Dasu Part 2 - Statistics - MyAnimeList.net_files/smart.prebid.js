// Prebid Script - MyAnimeList / MyAnimeList-Desktop
// Generated on Fri, 03 Sep 2021 16:38:50 +0200 by Smart MH+

var sas=sas||{};sas.cmd=sas.cmd||[];var pbjs=pbjs||{};pbjs.que=pbjs.que||[];var iall=iall||{};iall.cmd=iall.cmd||[];iall.responses={};var PREBID_TIMEOUT=2000;(function(){(function(){var sas=document.createElement('script');sas.async=!0;sas.type='text/javascript';sas.src='//tagmanager.smartadserver.com/latest/prebid.js';var node=document.getElementsByTagName('script')[0];node.parentNode.insertBefore(sas,node)})();iall.setInventoryType=function(){if(navigator.userAgent.match(/(Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini)/gi)){if(((screen.width>=480)&&(screen.height>=800))||((screen.width>=800)&&(screen.height>=480))||navigator.userAgent.match(/ipad/gi)){return'tablet'}else{return'mobile'}}else{return'desktop'}}
iall.setAdUnits=function(){var adUnits=[];if(iall.inventoryType=='desktop'){adUnits.push({code:"99451",mediaTypes:{"banner":{sizes:[[728,90]]}},bids:[{bidder:"criteo",params:{zoneId:"1587509"}},{bidder:"rtbhouse",params:{publisherId:"e9B1503TXRlu45t1smSd",region:"prebid-asia"}},{bidder:"triplelift",params:{inventoryCode:"D_728x90_1_smartadserver"}},{bidder:"gumgum",params:{inScreen:"",inScreenPubID:"",inSlot:"218921",video:"",inVideo:""}},{bidder:"onemobile",params:{dcn:"8a96909d01797938ef8c3aa4e38d0030",pos:"8a96909d01797938ef8c3ab32ae10037"}},{bidder:"nobid",params:{siteId:"22540746719"}}]});adUnits.push({code:"99452",mediaTypes:{"banner":{sizes:[[300,250]]}},bids:[{bidder:"criteo",params:{zoneId:"1587503"}},{bidder:"rtbhouse",params:{publisherId:"e9B1503TXRlu45t1smSd",region:"prebid-asia"}},{bidder:"triplelift",params:{inventoryCode:"D_300x250_Right_1_smartadserver"}},{bidder:"gumgum",params:{inScreen:"",inScreenPubID:"",inSlot:"218917",video:"",inVideo:""}},{bidder:"onemobile",params:{dcn:"8a96909d01797938ef8c3aa4e38d0030",pos:"8a96909d01797938ef8c3ab3099b0035"}},{bidder:"nobid",params:{siteId:"22540746719"}}]});adUnits.push({code:"99453",mediaTypes:{"banner":{sizes:[[300,600],[160,600]]}},bids:[{bidder:"criteo",params:{zoneId:"1587504;1587505"}},{bidder:"rtbhouse",params:{publisherId:"e9B1503TXRlu45t1smSd",region:"prebid-asia"}},{bidder:"triplelift",params:{inventoryCode:"D_300x600_160x600_Left_smartadserver"}},{bidder:"gumgum",params:{inScreen:"",inScreenPubID:"",inSlot:"218918",video:"",inVideo:""}},{bidder:"onemobile",params:{dcn:"8a96909d01797938ef8c3aa4e38d0030",pos:"8a96953301797938f46a3ab30e770033"}},{bidder:"nobid",params:{siteId:"22540746719"}}]});adUnits.push({code:"99454",mediaTypes:{"banner":{sizes:[[160,600],[300,600]]}},bids:[{bidder:"criteo",params:{zoneId:"1587506;1587507"}},{bidder:"rtbhouse",params:{publisherId:"e9B1503TXRlu45t1smSd",region:"prebid-asia"}},{bidder:"triplelift",params:{inventoryCode:"D_300x600_160x600_Right_smartadserver"}},{bidder:"gumgum",params:{inScreen:"",inScreenPubID:"",inSlot:"218919",video:"",inVideo:""}},{bidder:"onemobile",params:{dcn:"8a96909d01797938ef8c3aa4e38d0030",pos:"8a96909d01797938ef8c3ab319af0036"}},{bidder:"nobid",params:{siteId:"22540746719"}}]});adUnits.push({code:"99455",mediaTypes:{"banner":{sizes:[[300,250],[336,280]]}},bids:[{bidder:"criteo",params:{zoneId:"1587501"}},{bidder:"rtbhouse",params:{publisherId:"e9B1503TXRlu45t1smSd",region:"prebid-asia"}},{bidder:"triplelift",params:{inventoryCode:"D_300x250_1_smartadserver"}},{bidder:"gumgum",params:{inScreen:"",inScreenPubID:"",inSlot:"218915",video:"",inVideo:""}},{bidder:"onemobile",params:{dcn:"8a96909d01797938ef8c3aa4e38d0030",pos:"8a96909d01797938ef8c3ab2ff9e0034"}},{bidder:"nobid",params:{siteId:"22540746719"}}]});adUnits.push({code:"99456",mediaTypes:{"banner":{sizes:[[300,250],[336,280]]}},bids:[{bidder:"criteo",params:{zoneId:"1587502"}},{bidder:"rtbhouse",params:{publisherId:"e9B1503TXRlu45t1smSd",region:"prebid-asia"}},{bidder:"triplelift",params:{inventoryCode:"D_300x250_2_smartadserver"}},{bidder:"gumgum",params:{inScreen:"",inScreenPubID:"",inSlot:"218916",video:"",inVideo:""}},{bidder:"onemobile",params:{dcn:"8a96909d01797938ef8c3aa4e38d0030",pos:"8a96953301797938f46a3ab304d00032"}},{bidder:"nobid",params:{siteId:"22540746719"}}]});adUnits.push({code:"99457",mediaTypes:{"banner":{sizes:[[300,600]]}},bids:[{bidder:"criteo",params:{zoneId:"1587508"}},{bidder:"rtbhouse",params:{publisherId:"e9B1503TXRlu45t1smSd",region:"prebid-asia"}},{bidder:"triplelift",params:{inventoryCode:"D_300x600_Right_smartadserver"}},{bidder:"gumgum",params:{inScreen:"",inScreenPubID:"",inSlot:"218920",video:"",inVideo:""}},{bidder:"onemobile",params:{dcn:"8a96909d01797938ef8c3aa4e38d0030",pos:"8a96953301797938f46a3ab31e310034"}},{bidder:"nobid",params:{siteId:"22540746719"}}]});adUnits.push({code:"101363",mediaTypes:{"banner":{sizes:[[160,600]]}},bids:[{bidder:"criteo",params:{zoneId:"1594049"}},{bidder:"rtbhouse",params:{publisherId:"e9B1503TXRlu45t1smSd",region:"prebid-asia"}},{bidder:"triplelift",params:{inventoryCode:"D_160x600_Leftrail"}},{bidder:"gumgum",params:{inScreen:"",inScreenPubID:"",inSlot:"218922",video:"",inVideo:""}},{bidder:"onemobile",params:{dcn:"8a96909d01797938ef8c3aa4e38d0030",pos:"8a9690da01797979d1cc830b89350179"}},{bidder:"nobid",params:{siteId:"22540746719"}}]})}
if(iall.inventoryType=='tablet'){}
if(iall.inventoryType=='mobile'){}
return adUnits};iall.getFloor=function(f){var o=!1;if(iall.inventoryType=='desktop'){}
if(iall.inventoryType=='tablet'){}
if(iall.inventoryType=='mobile'){}
return o}
iall.setUpPbjs=function(){pbjs.que.push(function(){pbjs.aliasBidder('appnexus','msqappprv');pbjs.aliasBidder('appnexus','msqapptra');pbjs.aliasBidder('appnexus','msqappmax');pbjs.aliasBidder('appnexus','quaappnexus');pbjs.aliasBidder('appnexus','distrmapp');pbjs.aliasBidder('appnexus','adastamedia');pbjs.aliasBidder('appnexus','adux');pbjs.aliasBidder('appnexus','oftmedia');pbjs.aliasBidder('appnexus','gravity');pbjs.aliasBidder('rubicon','msqrubprv');pbjs.aliasBidder('rubicon','msqrubtra');pbjs.aliasBidder('rubicon','msqrubopn');pbjs.aliasBidder('rubicon','miprubicon');pbjs.aliasBidder('aol','onedisplay');pbjs.aliasBidder('aol','onemobile');pbjs.aliasBidder('adkernel','waardex_ak');pbjs.aliasBidder('adkernel','adsolut');pbjs.aliasBidder('adkernel','andbeyond');pbjs.aliasBidder('gamoshi','gambid');pbjs.aliasBidder('fidelity','kubient');pbjs.bidderSettings={msqappprv:{bidCpmAdjustment:function(bidCpm,bid){return bidCpm*.83}},msqapptra:{bidCpmAdjustment:function(bidCpm,bid){return bidCpm*.83}},msqappmax:{bidCpmAdjustment:function(bidCpm,bid){return bidCpm*.83}},msqrubprv:{bidCpmAdjustment:function(bidCpm,bid){return bidCpm*.83}},msqrubtra:{bidCpmAdjustment:function(bidCpm,bid){return bidCpm*.83}},msqrubopn:{bidCpmAdjustment:function(bidCpm,bid){return bidCpm*.83}}}
pbjs.setConfig({bidderTimeout:PREBID_TIMEOUT,priceGranularity:'dense',currency:{adServerCurrency:'USD',defaultRates:{USD:{CAD:1.357661005,HKD:7.7500884643,ISK:134.5541401274,PHP:50.2149681529,DKK:6.59509908,HUF:306.0863411182,CZK:23.6181882519,GBP:0.7931086341,RON:4.2766277424,SEK:9.2978591649,IDR:14205.8032554848,INR:75.8912774239,BRL:5.0767869781,RUB:69.6799363057,HRK:6.6932059448,JPY:107.2717622081,THB:30.9501061571,CHF:0.9463021939,EUR:0.8846426044,MYR:4.2675159236,BGN:1.7301840057,TRY:6.8315640481,CNY:7.0762561925,NOK:9.5961606511,NZD:1.5528131635,ZAR:17.055378627,USD:1,MXN:22.5097310686,SGD:1.3904812456,AUD:1.4549716914,ILS:3.4668259023,KRW:1203.5120311394,PLN:3.9352441614}}},})});return!0}
iall.runAuctions=function(p,c){var f=[];var t={};p.forEach(function(foo){f.push(foo.formatId.toString());t[foo.formatId]=foo.tagId.toString()});iall.allTagId=t;sas.cmd.push(function(){pbjs.que.push(function(){console.log('[runAuctions]',f);pbjs.requestBids({timeout:PREBID_TIMEOUT,adUnitCodes:f,bidsBackHandler:function(b){sas.setEids(pbjs.getUserIdsAsEids());if(b&&Object.keys(b).length!==0){Object.keys(b).forEach(function(formatId){iall.responses[formatId]=b[formatId];var tagId=t[formatId];var bid=pbjs.getHighestCpmBids(formatId)[0];if(bid&&(iall.getFloor(formatId)==!1||bid.cpm>=iall.getFloor(formatId))){bid.currency=bid.currency||'USD';bid.cpm=bid.cpm*(1+0/100);sas.setHeaderBiddingWinner(tagId,bid)}else{console.log('[runAuctions]','[bidsBackHandler]',tagId,'no winner')}
if(c=='std'){sas.render(tagId)}});if(c=='onecall'){console.log('RENDER ONE CALL');sas.render()}}else{if(c=='onecall'){console.log('RENDER ONE CALL');if(p.length&&typeof p[0].tagId!=='undefined'){sas.setHeaderBiddingWinner(p[0].tagId,{})}
sas.render()}else{sas.render(p[0].tagId)}}}})})})}
iall.getCallHistory=function(){sas.cmd.push(function(){if(sas.events.history('call').length>=1){sas.events.history('call').forEach(function(e){var c=e.data.callType;var t={target:e.data.ad.target,pageId:e.data.ad.pageId};var p=[];if(c=='onecall'){e.data.ad.formats.forEach(function(f){var g={};g.tagId=f.tagId;g.formatId=f.id;p.push(g)})}else{var g={};g.tagId=e.data.ad.tagId;g.formatId=e.data.ad.formatId;p.push(g)}
iall.sasRenderAd(p,c,t)})}})};iall.setAdUnitsCodes=function(){var o=[];iall.adUnits.forEach(function(a){o.push(a.code)});return o}
iall.checkAdUnitsExists=function(p){var o=!1;p.forEach(function(foo){if(iall.adUnitsCodes.indexOf(foo.formatId.toString())!==-1){o=!0}});return o}
iall.checkTargetingLimitation=function(t){var output=!0;return output}
iall.sasRenderAd=function(p,c,t){if(iall.checkAdUnitsExists(p)&&iall.checkTargetingLimitation(t)){iall.runAuctions(p,c)}else{if(c=='onecall'){console.log('No Prebid Auction','Onecall')
sas.render()}else{console.log('No Prebid Auction',p[0]);sas.render(p[0].tagId)}}}
iall.createNativeAd=function(native){var html='';html+='<a href="'+native.clickUrl+'" target="_blank" style="display:block; width:100%; padding:5px">';html+='<h3>'+native.title+'</h3>';html+='<div>';html+='<img src="'+native.image.url+'">';html+='</div>';html+='<span>'+native.body+'</span>';html+='</a>';return html}
iall.manageCallEvents=function(e){c=e.callType;var t={target:e.ad.target,pageId:e.ad.pageId};var p=[];if(c=='onecall'){e.ad.formats.forEach(function(f){var g={};g.tagId=f.tagId;g.formatId=f.id;p.push(g)})}else{var g={};g.tagId=e.ad.tagId;g.formatId=e.ad.formatId;p.push(g)}
iall.sasRenderAd(p,c,t)};iall.renderHeaderBiddingAd=function(p){sas.cmd.push(function(){sas.clean(p.tagId)});pbjs.que.push(function(){var bid=pbjs.getHighestCpmBids(p.formatId.toString())[0];if(bid&&(iall.getFloor(p.formatId)==!1||bid.cpm>=iall.getFloor(p.formatId))){iall.createAdRenderFailedEventListener();if(bid.mediaType=='banner'||bid.mediaType=='video'){var i=document.createElement('iframe');i.style.width=bid.width;i.style.height=bid.height;i.style.border=0;i.setAttribute('marginheight',0);i.setAttribute('marginwidth',0);i.scrolling='no';i.frameborder='no';var el=document.getElementById(p.tagId);if(el){el.setAttribute('style','text-align:center');if(bid.bidder==='teads'&&!document.getElementById(bid.adUnitCode)){var adunit=document.createElement('div');adunit.id=bid.adUnitCode;el.appendChild(adunit);el=adunit}
el.appendChild(i);pbjs.renderAd(i.contentWindow.document,bid.adId);window.parent.postMessage({postMessageEvent:'onMHRenderCreative',formatId:bid.adUnitCode,width:bid.width,height:bid.height},'*')}else{console.warn('Warning: header bidding winner could not be rendered! Missing '+p.tagId+' ad tag element')}}else if(bid.mediaType=='native'){console.log('[Header Bidding Ad]',p);i=iall.createNativeAd(bid.native);var div=document.getElementById(p.tagId);div.innerHTML=i;if(bid.native.impressionTrackers){bid.native.impressionTrackers.forEach(function(url){new Image().src=url})}}
iall.createAdRenderedEventListener(bid,p.tagId)}else{var noAd=new CustomEvent('iallNoAd',{detail:{formatId:p.formatId,tagId:p.tagId}});document.dispatchEvent(noAd)}})};iall.createAdRenderedEventListener=function(bid,tagId){var statusChecker=setInterval(function(){if(iall.bidWithRenderStatus.indexOf(bid.adUnitCode)>=0){clearInterval(statusChecker)}else if(bid.status=='rendered'){iall.bidWithRenderStatus.push(bid.adUnitCode);clearInterval(statusChecker);sas.hbRenderSuccess(tagId)}},100)};iall.createAdRenderFailedEventListener=function(){if(!iall.isRenderFailedEventAttached){iall.isRenderFailedEventAttached=!0;pbjs.onEvent('adRenderFailed',function(e){var errorFormat;var errorAdUnitCode;var allBids=pbjs.getBidResponses();for(var key in allBids){allBids[key].bids.forEach(function(singleBid){if(singleBid.adId==e.adId){errorFormat=iall.allTagId[singleBid.adUnitCode];errorAdUnitCode=singleBid.adUnitCode}})}
iall.bidWithRenderStatus.push(errorAdUnitCode);sas.hbRenderFailed(errorFormat)})}};iall.showAllBids=function(){function forEach(responses,cb){Object.keys(responses).forEach(function(adUnitCode){var response=responses[adUnitCode];response.bids.forEach(function(bid){cb(adUnitCode,bid)})})}
var winners=pbjs.getAllWinningBids();var output=[];forEach(pbjs.getBidResponses(),function(code,bid){output.push({bid:bid,adunit:code,adId:bid.adId,bidder:bid.bidder,time:bid.timeToRespond,cpm:bid.cpm,msg:bid.statusMessage,rendered:!!winners.find(function(winner){return winner.adId==bid.adId})})});forEach(pbjs.getNoBids&&pbjs.getNoBids()||{},function(code,bid){output.push({msg:"no bid",adunit:code,adId:bid.bidId,bidder:bid.bidder})});if(output.length){if(console.table){console.table(output)}else{for(var j=0;j<output.length;j++){console.log(output[j])}}}else{console.warn('NO prebid responses')}}
iall.init=function(){iall.isRenderFailedEventAttached=!1;iall.allTagId=[];iall.bidWithRenderStatus=[];iall.setUpPbjs();iall.inventoryType=iall.setInventoryType();iall.adUnits=iall.setAdUnits();iall.adUnitsCodes=iall.setAdUnitsCodes();pbjs.que.push(function(){pbjs.addAdUnits(iall.adUnits)});iall.getCallHistory()}
iall.init();sas.cmd.push(function(){sas.events.on('call',function(e){iall.manageCallEvents(e)})});sas.cmd.push(function(){sas.events.on('noad',function(t){console.log('No Ad: '+t.tagId);iall.renderHeaderBiddingAd(t)})})})()