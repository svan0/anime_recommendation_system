(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{48:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},49:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){e&&n(t.prototype,e);i&&n(t,i);return t}},50:function(t,e){function n(e){t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return n(e)}t.exports=n},51:function(t,e,n){var i=n(10),r=n(60);t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?r(t):e}},52:function(t,e,n){var i=n(61);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&i(t,e)}},53:function(t,e,n){"use strict";var i=n(10),r=n.n(i),o=n(59),s=o.a.Node||{},u={ELEMENT:s.ELEMENT_NODE||1,TEXT:s.TEXT_NODE||3,CDATA:s.CDATA_SECTION_NODE||4};function a(t){return t.nodeType===u.TEXT||t.nodeType===u.CDATA}function c(t){return t.nodeType===u.ELEMENT&&!t.prefix}var l={parse:function(t){t.xml&&(t=(new o.a.DOMParser).parseFromString(t.xml,"text/xml"));return new function t(e){if(void 0===e)return this;if(e.hasChildNodes()){var n,i,r,o,s="";for(o=0;o<e.childNodes.length;o++)if(a(n=e.childNodes.item(o)))s+=n.nodeValue.trim();else if(c(n)){i=n.nodeName;r=new t(n);if(this.hasOwnProperty(i)){this[i].constructor!==Array&&(this[i]=[this[i]]);this[i].push(r)}else this[i]=r}s&&(this.nodeValue=s.trim())}if(e.attributes&&e.hasAttributes&&e.hasAttributes()){var u,l;for(l=0;l<e.attributes.length;l++)this["@"+(u=e.attributes.item(l)).name]=u.value.trim()}}(t)}};function h(t){return void 0===t||"object"===r()(t)&&0===Object.keys(t).length&&t.constructor===Object||null===t||"number"==typeof t&&0!==t&&!t?[]:Array.isArray(t)?t:[t]}function d(t){t.Creatives&&(t.Creatives.Creative=h(t.Creatives.Creative));t.Extensions&&(t.Extensions.Extension=h(t.Extensions.Extension));t.Impression=h(t.Impression)}function f(t){var e=t.Creatives.Creative,n=e.filter(function(t){return t.NonLinearAds&&t.NonLinearAds.NonLinear}),i=e.filter(function(t){return t.Linear});n.forEach(function(t){t.NonLinearAds.NonLinear.NonLinearClickTracking=h(t.NonLinearAds.NonLinear.NonLinearClickTracking)});i.forEach(function(t){t.Linear.MediaFiles&&(t.Linear.MediaFiles.MediaFile=h(t.Linear.MediaFiles.MediaFile))})}var p={parse:function(t){var e=l.parse(t);if(!e.VAST||!e.VAST.Ad)return e;Array.isArray(e.VAST.Ad)&&(e.VAST.Ad=e.VAST.Ad[0]);if(e.VAST.Ad.Wrapper){d(e.VAST.Ad.Wrapper);e.VAST.Ad.Wrapper.Creatives&&f(e.VAST.Ad.Wrapper)}else if(e.VAST.Ad.InLine){d(e.VAST.Ad.InLine);f(e.VAST.Ad.InLine)}return e}},m={XML_PARSE_ERROR:{code:100,message:"XML parsing error."},VAST_SCHEMA_ERROR:{code:101,message:"VAST schema validation error."},GENERAL_WRAPPER_ERROR:{code:300,message:"General Wrapper error."},WRAPPER_URI_TIMEOUT:{code:301,message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the video player.)"},NO_ADS:{code:303,message:"No Ads VAST response after one or more Wrappers."},NO_AD_AT_URI:{code:401,message:"File not found. Unable to find Linear/MediaFile from URI."},UNDEFINED_ERROR:{code:900,message:"Undefined Error."}};function v(t){return void 0!==t&&null!==t}function g(t){return[].concat.apply([],t)}function y(t,e){var n,i,r,o=e.split("."),s=[];if(t instanceof Array)return g(t.map(function(t){return y(t,e)}));t=t||s;if(1===o.length){var u=t[e];if(!v(u))return s;u instanceof Array||(u=[u]);return u}n=o[0];i=o.slice(1).join(".");return v(r=t[n])?y(r,i):s}function _(t,e,n){var i=y(t,e);return v(i[0])?i[0]:n}function b(t,e,n){var i=_(t,e,n);i=parseInt(i,10);return isNaN(i)?n:i}function k(t){if(t)return t.nodeValue}function w(t,e,n){this.name="VastError";this.code=t;this.message="VAST Error: ["+t+"] - "+(n||function(t){var e,n;for(e in m)if(m.hasOwnProperty(e)&&(n=m[e]).code===t)return n.message;return"Unknown error code"}(t));this.stack=(new Error).stack;this.errorURIs=function(t){var e=[];t&&(e=g(y(t,"wrappers").map(function(t){return[].concat(y(t,"VAST.Error")).concat(y(t,"VAST.Ad.Wrapper.Error"))})).concat(y(t,"inline.VAST.Error")).concat(y(t,"inline.VAST.Ad.InLine.Error")).map(k).filter(v));return e}(e);this.vastResponse=e}w.prototype=new Error;w.prototype.constructor=w;w.prototype.getErrorURIs=function(){return this.errorURIs};var A={getSecondsFromTimeString:function(t){var e,n=0;if("string"==typeof t&&3===(e=t.split(":")).length){e.forEach(function(t,e){n+=parseFloat(t,10)*Math.pow(60,2-e)});return n}},decodeXML:function(t){return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},ensureProtocol:function(t){return 0===t.indexOf("https")||0===t.indexOf("http")?t:0===t.indexOf("//")?"https:".concat(t):t},convertProtocol:function(t){return 0===t.indexOf("https")?t:0===t.indexOf("http")?t.substr(5):t},isNonEmptyString:function(t){return!!t&&t.trim().length>0}};function T(t){this.url=A.convertProtocol(_(t,"nodeValue"));this.apiFramework=_(t,"@apiFramework");this.type=_(t,"@type");this.width=b(t,"@width");this.height=b(t,"@height");this.delivery=_(t,"@delivery");this.bitrate=b(t,"@bitrate")}T.prototype.isMP4=function(){return"progressive"===this.delivery&&"video/mp4"===this.type};T.prototype.isFlashVPAID=function(){return"VPAID"===this.apiFramework&&"application/x-shockwave-flash"===this.type};T.prototype.isJavascriptVPAID=function(){return"VPAID"===this.apiFramework&&"application/javascript"===this.type};var S=T;function E(t){return A.isNonEmptyString(t.nodeValue)}function P(t){this.vastResponse=t;this.linearInline=_(this.vastResponse,"inline.VAST.Ad.InLine.Creatives.Creative.Linear");this.linearWrappers=y(this.vastResponse,"wrappers.VAST.Ad.Wrapper.Creatives.Creative.Linear")}P.prototype.getDuration=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.getSecondsFromTimeString)(_(this.linearInline,"Duration.nodeValue"))};P.prototype.getClickTrackers=function(t){var e=y(this.linearWrappers,"VideoClicks.ClickTracking");return y(this.linearInline,"VideoClicks.ClickTracking").concat(e).filter(E).filter(function(e){return void 0===e["@id"]||(!t||e["@id"]===t)}).map(function(t){return A.convertProtocol(t.nodeValue)})};P.prototype.getAllClickTrackersAsMap=function(){var t=y(this.linearWrappers,"VideoClicks.ClickTracking"),e="unknown";return y(this.linearInline,"VideoClicks.ClickTracking").concat(t).filter(E).reduce(function(t,n){var i=n["@id"]||e,r=A.convertProtocol(n.nodeValue),o=t[i]||[];o=o.concat([r]);t[i]=o;return t},{})};P.prototype.getClickThrough=function(){return _(this.linearInline,"VideoClicks.ClickThrough.nodeValue")};P.prototype.getTrackingEvents=function(t){this.trackingEvents=this.trackingEvents||function(){return y(this.linearInline,"TrackingEvents.Tracking").concat(y(this.linearWrappers,"TrackingEvents.Tracking"))}.call(this);return this.trackingEvents.filter(function(e){return e["@event"]===t&&A.isNonEmptyString(e.nodeValue)}).map(function(t){return A.convertProtocol(t.nodeValue)})};P.prototype.getAdParameters=function(){var t=_(this.linearInline,"AdParameters.nodeValue");"true"===_(this.linearInline,"AdParameters.@xmlEncoded")&&"string"==typeof t&&(t=A.decodeXML(t));return t};P.prototype.getIcons=function(){return y(this.linearWrappers,"Icons.Icon").concat(y(this.linearInline,"Icons.Icon")).map(function(t){return new function(t){this.program=_(t,"@program","unknown");this.width=b(t,"@width",0);this.height=b(t,"@height",0);this.xPosition=_(t,"@xPosition","top");this.yPosition=_(t,"@yPosition","right");this.clickThrough=A.convertProtocol(_(t,"IconClicks.IconClickThrough.nodeValue",""));this.resource={type:_(t,"StaticResource.@creativeType",""),url:A.convertProtocol(_(t,"StaticResource.nodeValue",""))};this.clickTracking=y(t,"IconClicks.IconClickTracking").map(function(t){return A.convertProtocol(t.nodeValue)})}(t)}).filter(function(t){return t.program&&"unknown"!==t.program}).reduce(function(t,e){t[e.program]=e;return t},{})};P.prototype.getMediaFiles=function(t){var e=y(this.linearInline,"MediaFiles.MediaFile");t=t||{};return e=(e=e.map(function(t){return new S(t)})).filter(function(e){var n,i=!0;for(n in t)t.hasOwnProperty(n)&&(i=i&&e[n]===t[n]);return i})};P.prototype.getFlashVPAIDMediaFiles=function(){return this.getMediaFiles({apiFramework:"VPAID",type:"application/x-shockwave-flash"})};P.prototype.getJavascriptVPAIDMediaFiles=function(){return this.getMediaFiles({apiFramework:"VPAID",type:"application/javascript"})};P.prototype.getMp4MediaFiles=function(){return this.getMediaFiles({type:"video/mp4",delivery:"progressive"})};P.prototype.hasFlashVPAID=function(){return this.getFlashVPAIDMediaFiles().length>0};P.prototype.hasJavascriptVPAID=function(){return this.getJavascriptVPAIDMediaFiles().length>0};P.prototype.hasMp4=function(){return this.getMp4MediaFiles().length>0};function I(t){this.nonLinearInline=_(t,"inline.VAST.Ad.InLine.Creatives.Creative.NonLinearAds")}I.prototype.getStaticResource=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.convertProtocol,e=_(this.nonLinearInline,"NonLinear.StaticResource.nodeValue");if(e)return t(e)};function V(t){this.extension=t}V.prototype.getExtensionNodes=function(){return this.extension};V.prototype.getDetailsByPath=function(t){return y(this.extension,t)};var C={createVastExtension:function(t){return new V(t)}};function x(t){this.wrappers=[];this.inline=void 0;this._raw=[];if(t){this.wrappers=t.wrappers;this.inline=t.inline}this._vastChain=t}x.prototype.getImpressions=function(){var t=y(this.inline,"VAST.Ad.InLine.Impression.nodeValue"),e=y(this.wrappers,"VAST.Ad.Wrapper.Impression.nodeValue");return t.concat(e).filter(A.isNonEmptyString)};x.prototype.getAdTitle=function(){return this.inline.VAST.Ad.InLine.AdTitle.nodeValue};x.prototype.getLinearCreative=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;if(!this.linearCreative){_(this.inline,"VAST.Ad.InLine.Creatives.Creative.Linear")&&(this.linearCreative=new t(this))}return this.linearCreative};x.prototype.getNonLinearCreative=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;if(!this.nonLinearCreative){_(this.inline,"VAST.Ad.InLine.Creatives.Creative.NonLinearAds")&&(this.nonLinearCreative=new t(this))}return this.nonLinearCreative};x.prototype.getRawResponses=function(){return this._raw};x.prototype.addRawResponse=function(t){this._raw.push(t)};x.prototype.getExtensions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.createVastExtension,e=y(this.inline,"VAST.Ad.InLine.Extensions.Extension"),n=y(this.wrappers,"VAST.Ad.Wrapper.Extensions.Extension");return e.concat(n).map(function(e){return t(e)})};x.prototype.getLastVASTURL=function(){if(0!==this._raw.length){return this._raw[this._raw.length-1].uri}};var L=function(t,e){return e.ajax(t)},D=n(17),M=n.n(D),R=1e4;function O(t,e){return!(t.corsCookieDomainBlacklist instanceof Array)||-1===t.corsCookieDomainBlacklist.indexOf(function(t){return new URL(A.ensureProtocol(t)).hostname}(e))}var j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.PromiseModule,n=void 0===e?Promise:e,i=t.$,r=void 0===i?M.a:i,o=t.parseVast,s=void 0===o?p.parse:o,u=t.Response,a=void 0===u?x:u,c=t.makeJqueryAjaxRequest,l=void 0===c?L:c,h=0,d=r({});function f(t,e){d.on(t,e)}function v(t,e,n,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"GET",u=function(t,e){e&&e.length>0&&(-1!==t.indexOf("?")?t+="&"+e:t+="?"+e);return t}(e.url,e.extraParams),a={url:u,headers:e.headers||{},dataType:"xml",method:s};n&&O(e,u)&&(a.xhrFields={withCredentials:!0});if("POST"===s){a.data=e.data||"";a.contentType=e.contentType||"application/xml"}a.timeout=R;a.success=function(n,s,a){var c;c=r.Event("requestEnd",{requestNumber:h,uri:u,vastResponse:t});t.addRawResponse({requestNumber:h,uri:u,response:a.responseText,headers:a.getAllResponseHeaders().trim()});if(n)g(n,t,e,c,i,o);else{d.trigger(c);o(new w(m.XML_PARSE_ERROR.code,t))}};a.error=function(s,a,c){var l,f,p;if(0===s.status&&"timeout"!==a&&n)v(t,e,!1,i,o);else{if(200!==s.status||s.responseXML){l=m.WRAPPER_URI_TIMEOUT.code;p=s.statusText}else{l=m.XML_PARSE_ERROR.code;p=m.XML_PARSE_ERROR.message}f=r.Event("requestEnd",{requestNumber:h,uri:u,vastResponse:t,error:{status:s.status,statusText:p}});t.addRawResponse({requestNumber:h,uri:u,response:s.responseText,headers:s.getAllResponseHeaders().trim()});d.trigger(f);o(new w(l,t,"VAST Request Failed ("+a+" "+s.status+") with message ["+c+"] for "+u))}};d.trigger(r.Event("requestStart",{requestNumber:h,uri:u,vastResponse:t}));l(a,r)}function g(t,e,n,i,r,o){try{var u=function(t,e,n,i,r){var o=r(t);if(o.VAST.Error&&!o.VAST.Ad){n.trigger(i);throw new w(m.NO_ADS.code,e,"VAST request returned no ads and contains error tag")}if(!o.VAST.Ad){n.trigger(i);throw new w(m.NO_ADS.code,e,"VAST request returned no ads")}if(o.VAST&&o.VAST.Ad&&o.VAST.Ad.InLine){e.inline=o;n.trigger(i);return{inline:e}}e.wrappers.push(o);n.trigger(i);return{nextUrl:o.VAST&&o.VAST.Ad&&o.VAST.Ad.Wrapper&&o.VAST.Ad.Wrapper.VASTAdTagURI.nodeValue}}(t,e,d,i,s),a=u.inline,c=u.nextUrl;if(a)r(a);else{if(!c)throw new w(m.WRAPPER_URI_TIMEOUT.code,e);var l={url:A.convertProtocol(c),extraParams:n.extraParams,corsCookieDomainBlacklist:n.corsCookieDomainBlacklist};h++;v(e,l,!0,r,o)}}catch(t){o(t)}}return{getVastChain:function(t){var e=new a,i=t.httpMethod||"GET";return new n(function(n,o){if(t.url)v(e,t,!0,n,o,i);else if(t.vastBody&&t.vastBodyUrl){var s=r.Event("requestEnd",{requestNumber:h,vastResponse:e,uri:t.vastBodyUrl});e.addRawResponse({requestNumber:h,uri:t.vastBodyUrl});g(t.vastBody,e,t,s,n,o)}else o(new w(m.UNDEFINED_ERROR.code,e,'Vast-Parser configuration error, missing required attribute "url" or "vast (Both Body and BodyUrl)"'))})},addEventListener:f,on:f}},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return{requestVastChain:t.getVastChain,addEventListener:t.addEventListener}};n.d(e,"c",function(){return m});n.d(e,"d",function(){return x});n.d(e,"b",function(){return w});n.d(e,"a",function(){return N});n.d(e,"e",function(){return A})},54:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},55:function(t,e,n){"use strict";(function(t,i){n.d(e,"a",function(){return Ri});n.d(e,"c",function(){return $});n.d(e,"b",function(){return Oi});var r=n(10),o=n.n(r);
/*!
 * @zentrick/iab-vast-executor-factory v0.51.2
 * Copyright (c) 2019 Zentrick nv (https://www.zentrick.com/)
 *
 * Includes:
 * - http://npm.im/core-js
 * - http://npm.im/delay
 * - http://npm.im/eventemitter3
 * - http://npm.im/iab-vast-error
 * - http://npm.im/iab-vast-model
 * - http://npm.im/json-stringify-safe
 * - http://npm.im/p-defer
 * - http://npm.im/protochain
 * - http://npm.im/querystring
 * - http://npm.im/safe-json-stringify
 * - http://npm.im/serialize-error
 * - http://npm.im/upper-case-first
 */
Function.prototype.$asyncbind=function e(n,r){Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0});e.trampoline||(e.trampoline=function(t,e,n,i,r){return function o(s){for(;s;){if(s.then){s=s.then(o,i);return r?void 0:s}try{if(s.pop){if(s.length)return s.pop()?e.call(t):s;s=n}else s=s.call(t)}catch(t){return i(t)}}}});if(!e.LazyThenable){e.LazyThenable=function(){function t(t){return t&&t instanceof Object&&"function"==typeof t.then}function e(n,i,r){try{var o=r?r(i):i;if(n===o)return n.reject(new TypeError("Promise resolution loop"));t(o)?o.then(function(t){e(n,t)},function(t){n.reject(t)}):n.resolve(o)}catch(t){n.reject(t)}}function n(t){}function i(){}i.prototype={resolve:n,reject:n,then:function(t,e){this.resolve=t;this.reject=e}};function r(n,r){var o=new i;try{this._resolver(function(i){return t(i)?i.then(n,r):e(o,i,n)},function(t){e(o,t,r)})}catch(t){e(o,t,r)}return o}function o(t){this._resolver=t;this.then=r}o.resolve=function(t){return o.isThenable(t)?t:{then:function(e){return e(t)}}};o.isThenable=t;return o}();e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(e){e=e||"object"===(void 0===t?"undefined":o()(t))&&t.nextTick||"function"==typeof i&&i||function(t){setTimeout(t,0)};var n=function(){var t=[],n=0,i=1024;function r(){for(;t.length-n;){try{t[n]()}catch(t){}t[n++]=void 0;if(n===i){t.splice(0,i);n=0}}}return function(i){t.push(i);t.length-n==1&&e(r)}}();function r(t){if(t){var e=this;t(function(t){e.resolve(t)},function(t){e.reject(t)})}}r.prototype={resolve:function(t){if(void 0===this.state){if(t===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var e=this;if(t&&("function"==typeof t||"object"===o()(t)))try{var i=0,r=t.then;if("function"==typeof r){r.call(t,function(t){i++||e.resolve(t)},function(t){i++||e.reject(t)});return}}catch(t){i||this.reject(t);return}this.state=s;this.v=t;e.c&&n(function(){for(var n=0,i=e.c.length;n<i;n++)s(e.c[n],t)})}},reject:function(t){if(void 0===this.state){this.state=u;this.v=t;var e=this.c;e&&n(function(){for(var n=0,i=e.length;n<i;n++)u(e[n],t)})}},then:function(t,e){var i=new r,o={y:t,n:e,p:i};if(void 0===this.state)this.c?this.c.push(o):this.c=[o];else{var s=this.state,u=this.v;n(function(){s(o,u)})}return i}};function s(t,e){if("function"==typeof t.y)try{var n=t.y.call(void 0,e);t.p.resolve(n)}catch(e){t.p.reject(e)}else t.p.resolve(e)}function u(t,e){if("function"==typeof t.n)try{var n=t.n.call(void 0,e);t.p.resolve(n)}catch(e){t.p.reject(e)}else t.p.reject(e)}r.resolve=function(t){if(t&&t instanceof r)return t;var e=new r;e.resolve(t);return e};r.reject=function(t){if(t&&t instanceof r)return t;var e=new r;e.reject(t);return e};r.version="2.3.3-nodent";return r})()}function s(){return u.apply(n,arguments)}var u=this;switch(r){case!0:return new e.Thenable(s);case 0:return new e.LazyThenable(s);case void 0:s.then=s;return s;default:return function(){try{return u.apply(n,arguments)}catch(t){return r(t)}}}};function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function u(t,e,n){e&&s(t.prototype,e);n&&s(t,n);return t}function a(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;t.__proto__=e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var l=function(){function t(){this._contents=[]}var e=t.prototype;e.add=function(t){this._contents.push(t);this._contents.sort(function(t,e){return(t.sequence||0)-(e.sequence||0)})};e.remove=function(t){for(var e=this._contents.indexOf(t);e>=0;){this._contents.splice(e,1);e=this._contents.indexOf(t,e)}};e.get=function(t){return this._contents[t]};e.clear=function(){this._contents.length=0};e[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return e<t.length?{value:t.get(e++),done:!1}:{value:void 0,done:!0}}}};e.toArray=function(){return this._contents.slice()};u(t,[{key:"length",get:function(){return this._contents.length}},{key:"$type",get:function(){return"SortedList"}}]);return t}(),h=function(t){a(e,t);function e(){var e;(e=t.call(this)||this)._errors=[];return e}u(e,[{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"version",get:function(){return this._version},set:function(t){this._version=t}},{key:"errors",get:function(){return this._errors}},{key:"$type",get:function(){return"VAST"}}]);return e}(function(){function t(){this._ads=new l}u(t,[{key:"ads",get:function(){return this._ads}},{key:"adPod",get:function(){return this._adPod},set:function(t){this._adPod=t}},{key:"$type",get:function(){return"AdBuffet"}}]);return t}()),d=function(){function t(){}u(t,[{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"version",get:function(){return this._version},set:function(t){this._version=t}},{key:"$type",get:function(){return"AdSystem"}}]);return t}(),f=function(){function t(){this._ads=new l}u(t,[{key:"ads",get:function(){return this._ads}},{key:"$type",get:function(){return"AdPod"}}]);return t}(),p=function(){function t(){}u(t,[{key:"sequence",get:function(){return this._sequence},set:function(t){this._sequence=t}}]);return t}(),m=function(t){a(e,t);function e(){var e;(e=t.call(this)||this)._creatives=new l;e._impressions=[];e._errors=[];e._extensions=[];return e}u(e,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"adSystem",get:function(){return this._adSystem},set:function(t){this._adSystem=t}},{key:"creatives",get:function(){return this._creatives}},{key:"impressions",get:function(){return this._impressions}},{key:"errors",get:function(){return this._errors}},{key:"error",get:function(){console.warn("Ad.error is deprecated. Please use ad.errors instead.");return this._errors[0]},set:function(t){console.warn("Ad.error is deprecated. Please use ad.errors instead.");this._errors[0]=t}},{key:"extensions",get:function(){return this._extensions}}]);return e}(p),v=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}u(e,[{key:"adTitle",get:function(){return this._adTitle},set:function(t){this._adTitle=t}},{key:"description",get:function(){return this._description},set:function(t){this._description=t}},{key:"advertiser",get:function(){return this._advertiser},set:function(t){this._advertiser=t}},{key:"survey",get:function(){return this._survey},set:function(t){this._survey=t}},{key:"pricing",get:function(){return this._pricing},set:function(t){this._pricing=t}},{key:"$type",get:function(){return"InLine"}}]);return e}(m),g=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}u(e,[{key:"vastAdTagURI",get:function(){return this._vastAdTagURI},set:function(t){this._vastAdTagURI=t}},{key:"followAdditionalWrappers",get:function(){return this._followAdditionalWrappers},set:function(t){this._followAdditionalWrappers=t}},{key:"allowMultipleAds",get:function(){return this._allowMultipleAds},set:function(t){this._allowMultipleAds=t}},{key:"fallbackOnNoAd",get:function(){return this._fallbackOnNoAd},set:function(t){this._fallbackOnNoAd=t}},{key:"$type",get:function(){return"Wrapper"}}]);return e}(m),y=function(t){a(e,t);function e(){var e;(e=t.call(this)||this)._extensions=[];return e}u(e,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"adID",get:function(){return this._adID},set:function(t){this._adID=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"extensions",get:function(){return this._extensions}}]);return e}(p),_=function(){function t(){this._clickTrackings=[]}u(t,[{key:"clickThrough",get:function(){return this._clickThrough},set:function(t){this._clickThrough=t}},{key:"clickTrackings",get:function(){return this._clickTrackings}}]);return t}(),b=function(t){a(e,t);function e(){var e;(e=t.call(this)||this)._customClicks=[];return e}u(e,[{key:"customClicks",get:function(){return this._customClicks}},{key:"$type",get:function(){return"VideoClicks"}}]);return e}(_),k=function(){function t(){this._map=Object.create(null)}var e=t.prototype;e.get=function(t){return this._map[t]||[]};e.add=function(t,e){this._map[t]=this._map[t]||[];this._map[t].push(e)};u(t,[{key:"types",get:function(){return Object.keys(this._map)}},{key:"$type",get:function(){return"TrackingEvents"}}]);return t}(),w=function(t){a(e,t);function e(){var e;(e=t.call(this)||this)._mediaFiles=[];e._trackingEvents=new k;e._videoClicks=new b;e._icons=[];return e}u(e,[{key:"skipoffset",get:function(){return this._skipoffset},set:function(t){this._skipoffset=t}},{key:"adParameters",get:function(){return this._adParameters},set:function(t){this._adParameters=t}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t}},{key:"mediaFiles",get:function(){return this._mediaFiles}},{key:"trackingEvents",get:function(){return this._trackingEvents}},{key:"videoClicks",get:function(){return this._videoClicks}},{key:"icons",get:function(){return this._icons}},{key:"$type",get:function(){return"Linear"}}]);return e}(y),A=function(t){a(e,t);function e(){var e;(e=t.call(this)||this)._companions=[];return e}u(e,[{key:"companions",get:function(){return this._companions}},{key:"required",get:function(){return this._required},set:function(t){this._required=t}},{key:"$type",get:function(){return"CompanionAds"}}]);return e}(y),T=function(t){a(e,t);function e(){var e;(e=t.call(this)||this)._nonLinears=[];e._trackingEvents=new k;return e}u(e,[{key:"nonLinears",get:function(){return this._nonLinears}},{key:"trackingEvents",get:function(){return this._trackingEvents}},{key:"$type",get:function(){return"NonLinearAds"}}]);return e}(y),S=function(){function t(){this._clickTrackings=[];this._trackingEvents=new k}u(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"assetWidth",get:function(){return this._assetWidth},set:function(t){this._assetWidth=t}},{key:"assetHeight",get:function(){return this._assetHeight},set:function(t){this._assetHeight=t}},{key:"expandedWidth",get:function(){return this._expandedWidth},set:function(t){this._expandedWidth=t}},{key:"expandedHeight",get:function(){return this._expandedHeight},set:function(t){this._expandedHeight=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"adSlotID",get:function(){return this._adSlotID},set:function(t){this._adSlotID=t}},{key:"resource",get:function(){return this._resource},set:function(t){this._resource=t}},{key:"adParameters",get:function(){return this._adParameters},set:function(t){this._adParameters=t}},{key:"altText",get:function(){return this._altText},set:function(t){this._altText=t}},{key:"clickThrough",get:function(){return this._clickThrough},set:function(t){this._clickThrough=t}},{key:"clickTrackings",get:function(){return this._clickTrackings}},{key:"trackingEvents",get:function(){return this._trackingEvents}},{key:"$type",get:function(){return"Companion"}}]);return t}(),E=function(){function t(){this._clickTrackings=[]}u(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"expandedWidth",get:function(){return this._expandedWidth},set:function(t){this._expandedWidth=t}},{key:"expandedHeight",get:function(){return this._expandedHeight},set:function(t){this._expandedHeight=t}},{key:"scalable",get:function(){return this._scalable},set:function(t){this._scalable=t}},{key:"maintainAspectRatio",get:function(){return this._maintainAspectRatio},set:function(t){this._maintainAspectRatio=t}},{key:"minSuggestedDuration",get:function(){return this._minSuggestedDuration},set:function(t){this._minSuggestedDuration=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"resource",get:function(){return this._resource},set:function(t){this._resource=t}},{key:"clickThrough",get:function(){return this._clickThrough},set:function(t){this._clickThrough=t}},{key:"clickTrackings",get:function(){return this._clickTrackings}},{key:"adParameters",get:function(){return this._adParameters},set:function(t){this._adParameters=t}},{key:"$type",get:function(){return"NonLinear"}}]);return t}(),P=function(){function t(){}u(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"$type",get:function(){return"Impression"}}]);return t}(),I=function(){function t(){}u(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"delivery",get:function(){return this._delivery},set:function(t){this._delivery=t}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"bitrate",get:function(){return this._bitrate},set:function(t){this._bitrate=t}},{key:"minBitrate",get:function(){return this._minBitrate},set:function(t){this._minBitrate=t}},{key:"maxBitrate",get:function(){return this._maxBitrate},set:function(t){this._maxBitrate=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"scalable",get:function(){return this._scalable},set:function(t){this._scalable=t}},{key:"maintainAspectRatio",get:function(){return this._maintainAspectRatio},set:function(t){this._maintainAspectRatio=t}},{key:"codec",get:function(){return this._codec},set:function(t){this._codec=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"$type",get:function(){return"MediaFile"}}]);return t}(),V=function(){function t(){}u(t,[{key:"content",get:function(){return this._content},set:function(t){this._content=t}}]);return t}(),C=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}u(e,[{key:"$type",get:function(){return"HTMLResource"}}]);return e}(V),x=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}u(e,[{key:"$type",get:function(){return"IFrameResource"}}]);return e}(V),L=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}u(e,[{key:"creativeType",get:function(){return this._creativeType},set:function(t){this._creativeType=t}},{key:"$type",get:function(){return"StaticResource"}}]);return e}(V),D=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}u(e,[{key:"$type",get:function(){return"IconClicks"}}]);return e}(_),M=function(){function t(){this._clicks=new D;this._viewTrackings=[]}u(t,[{key:"program",get:function(){return this._program},set:function(t){this._program=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"xPosition",get:function(){return this._xPosition},set:function(t){this._xPosition=t}},{key:"yPosition",get:function(){return this._yPosition},set:function(t){this._yPosition=t}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"resource",get:function(){return this._resource},set:function(t){this._resource=t}},{key:"clicks",get:function(){return this._clicks}},{key:"viewTrackings",get:function(){return this._viewTrackings}},{key:"$type",get:function(){return"Icon"}}]);return t}(),R=function(){function t(){}u(t,[{key:"model",get:function(){return this._model},set:function(t){this._model=t}},{key:"currency",get:function(){return this._currency},set:function(t){this._currency=t}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}},{key:"$type",get:function(){return"Pricing"}}]);return t}(),O=function(){function t(){}u(t,[{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"content",get:function(){return this._content},set:function(t){this._content=t}}]);return t}(),j=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}u(e,[{key:"$type",get:function(){return"Extension"}}]);return e}(O),N=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}u(e,[{key:"$type",get:function(){return"CreativeExtension"}}]);return e}(O),F=function(){function t(){}u(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"$type",get:function(){return"Click"}}]);return t}(),U=function(){function t(){}u(t,[{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t}},{key:"$type",get:function(){return"TrackingEvent"}}]);return t}(),W=function(){function t(){}u(t,[{key:"value",get:function(){return this._value},set:function(t){this._value=t}}]);return t}(),z=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}u(e,[{key:"$type",get:function(){return"AbsoluteTimeOffset"}}]);return e}(W),H=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}u(e,[{key:"$type",get:function(){return"RelativeTimeOffset"}}]);return e}(W),$=Object.freeze({VAST:h,AdSystem:d,AdPod:f,InLine:v,Wrapper:g,Linear:w,CompanionAds:A,NonLinearAds:T,Companion:S,NonLinear:E,Impression:P,MediaFile:I,HTMLResource:C,IFrameResource:x,StaticResource:L,Icon:M,Pricing:R,Extension:j,CreativeExtension:N,Click:F,IconClicks:D,VideoClicks:b,TrackingEvent:U,TrackingEvents:k,AbsoluteTimeOffset:z,RelativeTimeOffset:H,SortedList:l,SortedListItem:p}),B={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. Video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General Wrapper error.",301:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element.",302:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response.",303:"No ads VAST response after one or more Wrappers. Also includes number of empty VAST responses from fallback.",400:"General linear error. Video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Timeout of MediaFile URI.",403:"Could not find MediaFile that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying MediaFile.",406:"Mezzanine was required but not provided. Ad not served.",407:"Mezzanine is in the process of being downloaded for the first time. Download may take several hours. Ad will not be served until mezzanine is downloaded and transcoded.",408:"Conditional ad rejected.",409:"Interactive unit in the InteractiveCreativeFile node was not executed",410:"Verification unit in the Verification node was not executed.",411:"Mezzanine was provided as required, but file did not meet required specification. Ad not served.",500:"General NonLinearAds error.",501:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearresource with supported type.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within Companion display area.",602:"Unable to display Required Companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"Undefined error.",901:"General VPAID error."};function q(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==o()(e)&&"function"!=typeof e?t:e}function Q(t){function e(){t.apply(this,arguments)}e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;return e}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+o()(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Q(Error));function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=q(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:t,writable:!0});Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:n.constructor.name,writable:!0});if(Error.hasOwnProperty("captureStackTrace")){Error.captureStackTrace(n,n.constructor);return q(n)}Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,value:new Error(t).stack,writable:!0});return n}return e}(),X=(function(t){a(e,t);function e(e){var n;void 0===e&&(e=900);(n=t.call(this,"VAST error "+e+(e in B?": "+B[e]:""))||this).code=e;n.$type="VASTError";return n}}(G),"impression"),Y="error",J="creativeView",Z="start",K="firstQuartile",tt="midpoint",et="thirdQuartile",nt="complete",it="mute",rt="unmute",ot="pause",st="resume",ut="collapse",at="acceptInvitation",ct="close",lt="skip",ht="progress";function dt(t,e){return t(e={exports:{}},e.exports),e.exports}function ft(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var pt=function(t,e,n,i){e=e||"&";n=n||"=";var r={};if("string"!=typeof t||0===t.length)return r;var o=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var a=0;a<u;++a){var c,l,h,d,f=t[a].replace(o,"%20"),p=f.indexOf(n);if(p>=0){c=f.substr(0,p);l=f.substr(p+1)}else{c=f;l=""}h=decodeURIComponent(c);d=decodeURIComponent(l);ft(r,h)?Array.isArray(r[h])?r[h].push(d):r[h]=[r[h],d]:r[h]=d}return r},mt=Object.freeze({default:pt,__moduleExports:pt}),vt=function(t){switch(o()(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},gt=function(t,e,n,i){e=e||"&";n=n||"=";null===t&&(t=void 0);return"object"===o()(t)?Object.keys(t).map(function(i){var r=encodeURIComponent(vt(i))+n;return Array.isArray(t[i])?t[i].map(function(t){return r+encodeURIComponent(vt(t))}).join(e):r+encodeURIComponent(vt(t[i]))}).join(e):i?encodeURIComponent(vt(i))+n+encodeURIComponent(vt(t)):""},yt=Object.freeze({default:gt,__moduleExports:gt}),_t=mt&&pt||mt,bt=yt&&gt||yt,kt=dt(function(t,e){e.decode=e.parse=_t;e.encode=e.stringify=bt}),wt=(kt.decode,kt.parse,kt.encode,kt.stringify,"event"),At=function(t){a(e,t);function e(e){var n;(n=t.call(this,e)||this).setHitType(wt);return n}var n=e.prototype;n.setEventCategory=function(t){return this.set("ec",t)};n.setEventAction=function(t){return this.set("ea",t)};n.setEventLabel=function(t){return this.set("el",t)};n.setEventValue=function(t){return this.set("ev",t)};return e}(function(){function t(t){this._options=Object.assign({},t);this._params={};this.setProtocolVersion(1)}var e=t.prototype;e.build=function(){return this._baseUrl+"?"+this.buildQueryString()};e.buildQueryString=function(){return kt.stringify(this._params)+"&z="+this.buildCacheBuster()};e.buildCacheBuster=function(){if(this._params.hasOwnProperty("z")){var t=this._params.z;delete this._params.z;return encodeURIComponent(t)}if(this._options.vast)return"[CACHEBUSTING]";var e=1e6+Math.floor(9e6*Math.random());return""+(new Date).getTime()+e};e.setBaseUrl=function(t){this._baseUrl=t;return this};e.set=function(t,e){null!=e&&(this._params[t]=e);return this};e.setProtocolVersion=function(t){return this.set("v",t)};e.setTrackingId=function(t){return this.set("tid",t)};e.setClientId=function(t){return this.set("cid",t)};e.setHitType=function(t){return this.set("t",t)};e.setDocumentReferrer=function(t){return this.set("dr",t)};e.setCampaignName=function(t){return this.set("cn",t)};e.setCampaignSource=function(t){return this.set("cs",t)};e.setCampaignMedium=function(t){return this.set("cm",t)};e.setCampaignKeyword=function(t){return this.set("ck",t)};e.setCampaignContent=function(t){return this.set("cc",t)};e.setCampaignId=function(t){return this.set("ci",t)};e.setCustomDimension=function(t,e){return this.set("cd"+t,e)};e.setCustomMetric=function(t,e){return this.set("cm"+t,e)};u(t,[{key:"options",get:function(){return this._options}}]);return t}()),Tt=function(t,e){void 0===e&&(e=!1);t.setBaseUrl("https://www.google-analytics.com/"+(e?"debug/collect":"collect"))},St=(function(t){a(e,t);function e(e){var n;n=t.call(this,e)||this;Tt(c(c(n)),!!n.options.debug);return n}}(At),dt(function(t){t.exports=function(){var t={};t.promise=new Promise(function(e,n){t.resolve=e;t.reject=n});return t}})),Et=10,Pt={timeout:2e3,postAllowed:!1,styles:{position:"absolute",top:0,left:0,width:0,height:0,border:0,pointerEvents:"none",visibility:"hidden"}},It=function(){},Vt=function(){function t(t,e){void 0===e&&(e={});this._url=t;this._options=Object.assign({},Pt,e);var n=window,i=0;try{for(;i<Et&&n.parent!==n&&null!=n.parent.document.createElement("img");){n=n.parent;++i}}catch(t){}this._window=n}var e=t.prototype;e.load=function(){if(null!=this._deferred)return Promise.reject(new Error("Already loading"));this._deferred=St();this._deferred.promise.catch(It);(this._options.postAllowed&&"function"==typeof navigator.sendBeacon?this._sendBeacon:this._loadPixel).call(this);return this._deferred.promise};e.dispose=function(){this._rejectWith("Disposed")};e._sendBeacon=function(){navigator.sendBeacon(this._url,"")?this._deferred.resolve():this._deferred.reject(new Error("Failed"))};e._loadPixel=function(){this._image=this._window.document.createElement("img");this._image.src=this._url;Object.assign(this._image.style,this._options.styles);this._image.onload=this._onImageLoad.bind(this);this._image.onerror=this._onImageError.bind(this);this._window.document.body.appendChild(this._image);setTimeout(this._onImageTimeout.bind(this),this._options.timeout)};e._onImageLoad=function(){this._deferred.resolve();this._remove()};e._onImageError=function(){this._rejectWith("Unknown error")};e._onImageTimeout=function(){this._rejectWith("Timed out")};e._rejectWith=function(t){this._deferred.reject(new Error(t));this._remove()};e._remove=function(){if(null!=this._image){null!=this._image.parentNode&&this._image.parentNode.removeChild(this._image);this._image=null}};u(t,[{key:"promise",get:function(){return null!=this._deferred?this._deferred.promise:null}}]);return t}(),Ct=function(t){var e=null;return function(){null===e&&(e=new t);return e}},xt=Symbol("tracking"),Lt=function(){},Dt=[],Mt=function(){function t(){this[xt]=[]}var e=t.prototype;e.complete=function(){return new Promise(function(t,e){var n,i;function r(){if(this[xt].length>0){n=this[xt];this[xt]=[];return Promise.resolve(Promise.all(n)).then(function(t){try{return r}catch(t){return e(t)}},e)}return[1]}return(i=function(t){for(;t;){if(t.then)return void t.then(i,e);try{if(t.pop){if(t.length)return t.pop()?o.call(this):t;t=r}else t=t.call(this)}catch(t){return e(t)}}}.bind(this))(r);function o(){return t()}}.bind(this))};e.track=function(t,e){void 0===e&&(e={});var n=new Vt(t,e),i=n.load().catch(Lt);this[xt].push(i);Dt.push(i);return n};return t}(),Rt=Ct(Mt),Ot=function(t){t.setBaseUrl("https://pxsrv.net/")},jt=/^(?:(\w+):)?\/\/(.*)/,Nt=/[_%]/g,Ft=function(t){return"_"===t?"_5F":"_"},Ut=function(t){a(e,t);function e(e){var n;n=t.call(this,e)||this;Ot(c(c(n)));return n}var n=e.prototype;n.setRedirectUrl=function(t){this._redirectUrl=t;return this};n.build=function(){if(null==this._redirectUrl)return t.prototype.build.call(this);var e=jt.exec(this._redirectUrl);if(null==e)throw new Error("Invalid redirect URL: "+this._redirectUrl);return this._baseUrl+"t/"+this._buildEmbeddedQueryString()+"/"+(e[1]||"https")+"/"+e[2]};n._buildEmbeddedQueryString=function(){return this.buildQueryString().replace(Nt,Ft)};return e}(At),Wt=function(){return(new Date/1e9%1+Math.random())%1};var zt={placement:"ZA-",embed:"ZO-",wrapper:"ZW-"},Ht=Object.keys(zt),$t=Ct(function(t){a(e,t);function e(e){var n;void 0===e&&(e=null);n=t.call(this)||this;null!=e&&(n.config=e);return n}e.prototype.trackEvent=function(t,e,n,i){if(null==this._trackingId)throw new Error("Invalid pxsrv configuration");var r;r=null!=n&&"object"!==o()(n)?Object.assign({},i,{label:n}):Object.assign({},n);var s=(new Ut).setTrackingId(this._trackingId).setClientId(this._clientId).setEventCategory(t).setEventAction(e);null!=r.label&&s.setEventLabel(r.label);null!=r.value&&s.setEventValue(r.value);Object.keys(r.customDimensions||{}).forEach(function(t){s.setCustomDimension(t,r.customDimensions[t])});Object.keys(r.customMetrics||{}).forEach(function(t){s.setCustomMetric(t,r.customMetrics[t])});null!=r.redirectUrl&&s.setRedirectUrl(r.redirectUrl);if(null!=this._baseUrl){var u="function"==typeof this._baseUrl?this._baseUrl(t,e,r):this._baseUrl;s.setBaseUrl(u)}var a=s.build();return this.track(a,{postAllowed:!0})};u(e,[{key:"config",set:function(t){this._trackingId=function(t){null!=t.placement&&null!=t.campaign&&(t={placement:t.campaign+"-"+t.placement});for(var e=0;e<Ht.length&&null==t[Ht[e]];)++e;if(e===Ht.length)throw new Error("Invalid pxsrv configuration");var n=Ht[e];return zt[n]+t[n]}(t);this._baseUrl=t.baseUrl;this._clientId=t.client||function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Wt()*(20^t?16:4):4).toString(16):"-");return e}()}}]);return e}(Mt)),Bt=function(t){return function(e){e=""+e;for(;e.length<t;)e="0"+e;return e}},qt=Bt(2),Qt=Bt(3),Gt=function(){return t=new Date,e=t.getTimezoneOffset(),n=Math.floor(e/60),i=(n<0?"+"+qt(-n):"-"+qt(n))+":"+qt(e%60),t.getFullYear()+"-"+qt(t.getMonth()+1)+"-"+qt(t.getDate())+"T"+qt(t.getHours())+":"+qt(t.getMinutes())+":"+qt(t.getSeconds())+"."+Qt(t.getMilliseconds())+i;var t,e,n,i},Xt={timestamp:function(){return encodeURIComponent(Gt())},cachebusting:function(){return 1e7+Math.floor(9e7*Math.random())},errorcode:function(t){return null!=t&&"number"==typeof t.code?t.code:900}},Yt=new RegExp("\\[("+Object.keys(Xt).join("|")+")\\]","ig"),Jt=function(){return new Promise(function(t,e){return Promise.resolve(new Promise(function(t,e){var n,i;function r(){if(Dt.length>0){n=Dt;Dt=[];return Promise.resolve(Promise.all(n)).then(function(t){try{return r}catch(t){return e(t)}},e)}return[1]}return(i=function(t){for(;t;){if(t.then)return void t.then(i,e);try{if(t.pop){if(t.length)return t.pop()?o.call(this):t;t=r}else t=t.call(this)}catch(t){return e(t)}}}.bind(this))(r);function o(){return t()}})).then(function(n){try{return t()}catch(t){return e(t)}},e)})},Zt=dt(function(t,e){(t.exports=function(t,e,i,r){return JSON.stringify(t,n(e,r),i)}).getSerialize=n;function n(t,e){var n=[],i=[];null==e&&(e=function(t,e){return n[0]===e?"[Circular ~]":"[Circular ~."+i.slice(0,n.indexOf(e)).join(".")+"]"});return function(r,o){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this);~s?i.splice(s,1/0,r):i.push(r);~n.indexOf(o)&&(o=e.call(this,r,o))}else n.push(o);return null==t?o:t.call(this,r,o)}}});Zt.getSerialize;function Kt(t){return null==t?null:Object.getPrototypeOf(Object(t))}var te,ee,ne=function t(e,n){switch(o()(e)){case"object":if(null==e)return e;if(null!=e.nodeType)return"[DOM "+function(t){if(null==t)return"null";if(1!==t.nodeType)return"node";try{var e=(t.nodeName||"unknown").toLowerCase();null!=t.id&&(e+="#"+t.id);t.classList&&t.classList.length>0&&(e+="."+Array.from(t.classList).join("."));return e}catch(t){return"err"}}(e)+"]";if(n.indexOf(e)>=0)return"[Circular]";n.push(e);var i=Array.isArray(e)?[]:{},r=function(t){for(var e=[],n=Kt(t);n;){e.push(n);n=Kt(n)}return e}(e).filter(function(t){return t!==Object.prototype});return function t(e){if(null==e)return e;var n=Object.keys(e);if(1!==n.length||"message"!==n[0])return e;var i=e.message;Array.isArray(i)&&1===i.length&&(i=i[0]);return t(i)}([e].concat(r).map(function(t){return Object.getOwnPropertyNames(t)}).reduce(function(i,r){r.forEach(function(r){try{e instanceof Error&&"stack"===r||(i[r]=t(e[r],n))}catch(t){i[r]="[Error: "+(t.message||t)+"]"}});return i},i));case"function":if(n.length>0)return;return"[Function "+(e.name||"anonymous")+"]";default:return e}},ie=10,re=$t(),oe={},se={},ue={_:(new Date).getTime()},ae=["_","factory","loadingMedia","loadedMedia","executing"],ce="",le=null,he=0,de={get type(){return null},get sampleRate(){return 1},get dimensions(){return{}},get metrics(){return{}},init:function(){},setDimension:function(){},setMetric:function(){},track:function(){},trackError:function(){}},fe={get type(){return"pxsrv"},get sampleRate(){return ee},get dimensions(){return oe},get metrics(){return se},init:function(t){"number"==typeof(ee=t.sampleRate)&&ee<1&&(ce="/"+Math.round(1/ee));if(null!=t.trackingConfig){re.config=Object.assign({},t.trackingConfig,{baseUrl:function(t){return"terrax"===t||"galactus"===t?"https://unrulydiag.pxsrv.net/":"https://pixel.unruly.systems/"}})}le=t.eventCategory;Object.assign(oe,t.customDimensions,{171:function(){var t=window,e=0;try{for(;e<ie&&t.parent!==t&&null!=t.parent.location&&null!=t.parent.location.hostname;){t=t.parent;++e}}catch(t){}return t}().location.hostname});Object.assign(se,t.customMetrics)},setDimension:function(t,e){null==oe[t]&&(oe[t]=e)},setMetric:function(t,e){null==se[t]&&(se[t]=e)},track:function(t,e,n){if(!(he>=100)){var i=(new Date).getTime();he++;var r={110:i-ue._},o=ae.indexOf(t);if(o>0){ue[t]=i;var s=ue[ae[o-1]];r[111]=i-s}re.trackEvent(le,t+ce,{customDimensions:Object.assign({},oe,e,{106:he,107:document.readyState}),customMetrics:Object.assign({},se,n,r)})}},trackError:function(t,e,n,i){e=e||"[Unknown error]";this.track(t,Object.assign({},n,{110:function(t){try{var e=ne(t,[])||t;switch(o()(e)){case"string":return e;case"number":return""+e;default:return Zt(e)}}catch(t){return"[Error]"}}(e).substring(0,1e3)}),i)}},pe={get type(){return te.type},get sampleRate(){return te.sampleRate},get dimensions(){return te.dimensions},get metrics(){return te.metrics},init:function(t){te===de&&null!=t.eventCategory&&(te=fe).init(t)},setDimension:function(){if(null!=te){var t;(t=te).setDimension.apply(t,arguments)}},setMetric:function(){var t;(t=te).setMetric.apply(t,arguments)},track:function(){var t;(t=te).track.apply(t,arguments)},trackError:function(){var t;(t=te).trackError.apply(t,arguments)}};te=de;var me,ve,ge,ye,_e=function(t){a(e,t);function e(){var e;(e=t.call(this,"Method is abstract")||this).$type="AbstractMethodError";return e}return e}(G),be=function(t){a(e,t);function e(e,n,i){var r;(r=t.call(this,"VAST error "+e+": "+(null!=n?n:B[e]))||this).$type="VASTError";r.code=e;r.cause=i;r.errorCode=e;return r}return e}(G),ke=function(t){a(e,t);function e(e,n,i){var r;(r=t.call(this,901,"Error calling '"+e+"': "+i,i)||this).$type="VPAIDCallError";r.methodName=e;r.args=n;r.cause=i;r.inner=r.cause;return r}return e}(be),we=function(t){a(e,t);function e(){var e;(e=t.call(this)||this).$type="ExecutorError";return e}return e}(G),Ae=function(t){a(e,t);function e(){var e;(e=t.call(this,"Canceled")||this).$type="CancelationError";return e}return e}(we),Te=function(t){a(e,t);function e(){var e;(e=t.call(this,"Disposed")||this).$type="DisposalError";return e}return e}(we),Se=dt(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}if(Object.create){i.prototype=Object.create(null);(new i).__proto__||(n=!1)}function r(t,e,i,r,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new function(t,e,n){this.fn=t;this.context=e;this.once=n||!1}(i,r||t,o),u=n?n+e:e;t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++);return t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function s(){this._events=new i;this._eventsCount=0}s.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r};s.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s};s.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0};s.prototype.emit=function(t,e,i,r,o,s){var u=n?n+t:t;if(!this._events[u])return!1;var a,c,l=this._events[u],h=arguments.length;if(l.fn){l.once&&this.removeListener(t,l.fn,void 0,!0);switch(h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,r),!0;case 5:return l.fn.call(l.context,e,i,r,o),!0;case 6:return l.fn.call(l.context,e,i,r,o,s),!0}for(c=1,a=new Array(h-1);c<h;c++)a[c-1]=arguments[c];l.fn.apply(l.context,a)}else{var d,f=l.length;for(c=0;c<f;c++){l[c].once&&this.removeListener(t,l[c].fn,void 0,!0);switch(h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,i);break;case 4:l[c].fn.call(l[c].context,e,i,r);break;default:if(!a)for(d=1,a=new Array(h-1);d<h;d++)a[d-1]=arguments[d];l[c].fn.apply(l[c].context,a)}}}return!0};s.prototype.on=function(t,e,n){return r(this,t,e,n,!1)};s.prototype.once=function(t,e,n){return r(this,t,e,n,!0)};s.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e){o(this,s);return this}var u=this._events[s];if(u.fn)u.fn!==e||r&&!u.once||i&&u.context!==i||o(this,s);else{for(var a=0,c=[],l=u.length;a<l;a++)(u[a].fn!==e||r&&!u[a].once||i&&u[a].context!==i)&&c.push(u[a]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this};s.prototype.removeAllListeners=function(t){var e;if(t){e=n?n+t:t;this._events[e]&&o(this,e)}else{this._events=new i;this._eventsCount=0}return this};s.prototype.off=s.prototype.removeListener;s.prototype.addListener=s.prototype.on;s.prefixed=n;s.EventEmitter=s;t.exports=s}),Ee=function(){var t=/^[0-9]+$/;return function(e){return t.test(e)}}(),Pe=function(){function t(t,e,n){this._executor=t;this._icon=e;this._document=n;this._visibleTimeout=null;this._trackedView=!1;this._disposed=!1;this._boundOnClick=this._onClick.bind(this);this._boundOnWillExecute=this._onWillExecute.bind(this);this._boundOnDidExecute=this._onDidExecute.bind(this);this._boundOnWillDispose=this._onWillDispose.bind(this);this._element=this._createElement();this._element.style.setProperty("pointer-events","auto","important");this._positionElement();this._addClickListener();this._addExecutorListeners()}var e=t.prototype;e.dispose=function(){if(!this._disposed){this._disposed=!0;this._cancelPendingVisibility();this._removeClickListener();this._removeExecutorListeners();this._setVisible(!1)}};e._createElement=function(){throw new _e};e._positionElement=function(){var t=this._icon,e=this._element;Object.assign(e.style,{width:t.width?t.width+"px":"auto",height:t.height?t.height+"px":"auto",display:"none",position:"absolute",cursor:"pointer"});"right"===t.xPosition?e.style.right="0":e.style.left=Ee(t.xPosition)?t.xPosition+"px":"0";"bottom"===t.yPosition?e.style.bottom="0":e.style.top=Ee(t.yPosition)?t.yPosition+"px":"0"};e._addClickListener=function(){null!=this._icon.clicks&&this._element.addEventListener("click",this._boundOnClick)};e._removeClickListener=function(){this._element.removeEventListener("click",this._boundOnClick)};e._onClick=function(){var t=this._icon.clicks,e=t.clickThrough,n=t.clickTrackings;null!=e&&window.open(e.uri,"_blank");for(var i=0;n.length;++i)this._executor._track("iconclick",n[i].uri,{})};e._onWillExecute=function(){var t=this._icon;t.offset>0||t.duration>0?this._setVisibleIntermittently(!0,t.offset,t.duration):this._setVisible(!0)};e._onDidExecute=function(){this._removeExecutorListeners()};e._onWillDispose=function(){this._removeExecutorListeners()};e._setVisible=function(t){if(t){this._element.style.display="";if(!this._trackedView){this._trackedView=!0;for(var e=this._icon.viewTrackings,n=0;n<e.length;++n)this._executor._track("iconview",e[n].uri,{})}}else this._element.style.display="none"};e._setVisibleDelayed=function(t,e,n){var i=this;this._cancelPendingVisibility();var r=function(){i._setVisible(t);"function"==typeof n&&n()};e>0?this._visibleTimeout=setTimeout(r,e):r()};e._setVisibleIntermittently=function(t,e,n){var i=this;void 0===e&&(e=0);void 0===n&&(n=0);this._setVisibleDelayed(t,1e3*e,function(){n>0&&i._setVisibleDelayed(!t,1e3*n)})};e._cancelPendingVisibility=function(){if(null!=this._visibleTimeout){clearTimeout(this._visibleTimeout);this._visibleTimeout=null}};e._addExecutorListeners=function(){this._executor.once("willExecute",this._boundOnWillExecute);this._executor.once("didExecute",this._boundOnDidExecute);this._executor.once("willDispose",this._boundOnWillDispose)};e._removeExecutorListeners=function(){this._executor.removeListener("willExecute",this._boundOnWillExecute);this._executor.removeListener("didExecute",this._boundOnDidExecute);this._executor.removeListener("willDispose",this._boundOnWillDispose)};u(t,[{key:"element",get:function(){return this._element}}]);return t}(),Ie=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}e.prototype._createElement=function(){var t=this._document.createElement("img");t.src=this._icon.resource.content;return t};return e}(Pe),Ve=(me=!0,function(t,e){var n,i,r=new Promise(function(r,o){i=me?r:o;n=setTimeout(i,t,e)});r.clear=function(){if(n){clearTimeout(n);n=null;i(e)}};return r}),Ce=function(t,e,n){void 0===n&&(n="");for(var i=Object.keys(e),r=0;r<i.length;++r){var o=i[r],s=e[o];t.style.setProperty(o,s,n)}},xe=function(t,e){var n=St(),i=function i(){t.removeEventListener(e,i);n.resolve()};t.addEventListener(e,i);n.promise.cancel=function(){t.removeEventListener(e,i);n.reject(new Error("Canceled"))};return n.promise},Le=function(t,e){null==e&&(e=window.document);var n=e.createElement("iframe");n.frameBorder="0";n.scrolling="no";null!=t&&Ce(n,t,"important");return n},De=function(t,e,n){return new Promise(function(i,r){var o,s,u;o=Le(e,n.ownerDocument);s=xe(o,"load");o.src="about:blank";n.appendChild(o);return Promise.resolve(Promise.race([s,function(t){return new Promise(function(e,n){var i;function r(){return null==t.contentWindow||null==t.contentWindow.document?Promise.resolve(Ve(100)).then(function(t){try{return r}catch(t){return n(t)}},n):[1]}return(i=function(t){for(;t;){if(t.then)return void t.then(i,n);try{if(t.pop){if(t.length)return t.pop()?o.call(this):t;t=r}else t=t.call(this)}catch(t){return n(t)}}}.bind(this))(r);function o(){return e()}})}(o)])).then(function(e){try{(u=o.contentWindow.document).open();u.write(t);u.close();return i(o)}catch(t){return r(t)}},r)})},Me=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}e.prototype._createElement=function(){var t=Le(null,this._document);t.src=this._icon.resource.content;return t};return e}(Pe),Re=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;n._createElement=function(){var t=this._document.createElement("div");this._initElement(t);return t};n._initElement=function(t){return new Promise(function(e,n){var i,r;i=this._icon.resource.content;r=null;var o=function(){try{null!=r?t.innerHTML=r:this.dispose();return e()}catch(t){return n(t)}}.bind(this),s=function(t){try{return o()}catch(t){return n(t)}};try{return Promise.resolve(function(t){return new Promise(function(e,n){var i=new XMLHttpRequest;i.addEventListener("load",function(){i.status>=200&&i.status<300?e(i.responseText):n(new Error)});i.addEventListener("error",function(){n(new Error)});i.open("GET",t);i.send()})}(i)).then(function(t){try{r=t;return o()}catch(t){return s()}},s)}catch(t){s()}}.bind(this))};return e}(Pe),Oe=function(t,e,n){switch(e.resource.$type){case"StaticResource":return new Ie(t,e,n);case"IFrameResource":return new Me(t,e,n);case"HTMLResource":return new Re(t,e,n);default:throw new Error("Unsupported resource type for <Icon>")}},je=function(t){return["StaticResource","IFrameResource","HTMLResource"].indexOf(t)>=0},Ne=function(t,e){return function(t,e){var n=St(),i=setInterval(function(){t()&&n.resolve()},e);n.promise.cancel=function(){clearInterval(i);n.reject(new Error("Canceled"))};return n.promise}(function(){return null!=t[e]},20)},Fe=function(){},Ue=function(t){var e,n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];e=t.apply(this,r)}return e}},We={position:"absolute",left:0,top:0,margin:0,padding:0,width:"100%",height:"100%",border:0},ze=We,He=Object.assign({},ze,{"pointer-events":"none"}),$e=ze,Be=0,qe=2,Qe=function(t,e){return e.offset.value-t.offset.value},Ge=function(t){return t instanceof Ae||t instanceof Te},Xe=Symbol("config"),Ye=Symbol("listeners"),Je=Symbol("iframe"),Ze=Symbol("slot"),Ke=Symbol("videoSlot"),tn=Symbol("iconSlot"),en=Symbol("iconLayers"),nn=Symbol("width"),rn=Symbol("height"),on=Symbol("maxWidth"),sn=Symbol("maxHeight"),un=Symbol("createdVideoSlot"),an=Symbol("progressTimer"),cn=Symbol("boundOnProgressTimer"),ln=Symbol("remainingAbsoluteProgressEvents"),hn=Symbol("remainingRelativeProgressEvents"),dn=Symbol("paused"),fn=Symbol("state"),pn=Symbol("erroring"),mn=Symbol("canceling"),vn=Symbol("disposing"),gn=Symbol("errored"),yn=["load","execute","cancel","dispose","_finishTracking"],_n=function(t){a(e,t);e.canExecute=function(t){throw new _e};function e(e){var n;(n=t.call(this)||this)[Xe]=e;n[Ye]=[];n[Je]=null;n[Ze]=null;n[Ke]=null;n[nn]=0;n[rn]=0;n[un]=!1;n[an]=null;n[cn]=function(){return n._onProgressTimer()};n[dn]=!1;n[fn]=Be;n[pn]=St();n[mn]=St();n[vn]=St();n[gn]=null;for(var i=0;i<yn.length;++i){var r=yn[i];n[r]=Ue(n[r])}pe.init({eventCategory:e.diagnosticsEventCategory});return n}var n=e.prototype;n.load=function(){return new Promise(function(t,e){if(this[fn]!==Be)return e(new we("Must be idle"));this[fn]=1;this.emit("willLoad");if(!this[Xe].iframeDisabled)return Promise.resolve(this._provisionIframe()).then(function(t){try{return n.call(this)}catch(t){return e(t)}}.bind(this),e);function n(){this[Xe].videoSlotCreationDisabled||this._provisionVideoSlot();this._provisionSlot();this._setDefaultDimensions();this._provisionIconSlot();this._addAllListeners();pe.track("loadingMedia");var n=function(t){try{Ge(t)&&pe.trackError("loadError",t);return Promise.resolve(this._onInternalError(t,"load")).then(function(n){try{throw t}catch(t){return e(t)}},e)}catch(t){return e(t)}}.bind(this);try{return Promise.resolve(this._internalCallAsync("load")).then(function(i){try{pe.track("loadedMedia");this.emit("didLoad");this[fn]=qe;return function(){try{return t()}catch(t){return e(t)}}()}catch(t){return n(t)}}.bind(this),n)}catch(t){n(t)}}return n.call(this)}.bind(this))};n.execute=function(){return new Promise(function(t,e){if(this[fn]!==qe)return e(new we("Must be loaded"));this[fn]=3;this.emit("willExecute");pe.track("executing");var n=function(){try{var n=function(){return t()};return this[Xe].autoDisposeDisabled?Promise.resolve(this._finishTracking()).then(function(t){try{return n.call(this)}catch(t){return e(t)}}.bind(this),e):Promise.resolve(this.dispose()).then(function(t){try{return n.call(this)}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),i=function(t){try{Ge(t)&&pe.trackError("executeError",t);return Promise.resolve(this._onInternalError(t,"execute")).then(function(n){try{throw t}catch(t){return e(t)}},e)}catch(t){return e(t)}}.bind(this);try{return Promise.resolve(this._internalCallAsync("execute",[this[dn]])).then(function(t){try{pe.track("executed");this.emit("didExecute");this[fn]=4;return n()}catch(t){return i(t)}}.bind(this),i)}catch(t){i(t)}}.bind(this))};n.pause=function(){return new Promise(function(t,e){if(3!==this[fn]){this[Xe].pauseBeforeExecuteDisabled||(this[dn]=!0);return r.call(this)}this.emit("willPause");var n=function(){try{return r.call(this)}catch(t){return e(t)}}.bind(this),i=function(t){try{return Promise.resolve(this._onInternalError(t,"pause")).then(function(n){try{throw t}catch(t){return e(t)}},e)}catch(t){return e(t)}}.bind(this);try{return Promise.resolve(this._internalCallAsync("pause")).then(function(t){try{this.emit("didPause");return n()}catch(t){return i(t)}}.bind(this),i)}catch(t){i(t)}function r(){return t()}}.bind(this))};n.resume=function(){return new Promise(function(t,e){if(3!==this[fn]){this[Xe].pauseBeforeExecuteDisabled||(this[dn]=!1);return r.call(this)}this.emit("willResume");var n=function(){try{return r.call(this)}catch(t){return e(t)}}.bind(this),i=function(t){try{return Promise.resolve(this._onInternalError(t,"resume")).then(function(n){try{throw t}catch(t){return e(t)}},e)}catch(t){return e(t)}}.bind(this);try{return Promise.resolve(this._internalCallAsync("resume")).then(function(t){try{this.emit("didResume");return n()}catch(t){return i(t)}}.bind(this),i)}catch(t){i(t)}function r(){return t()}}.bind(this))};n.cancel=function(){return new Promise(function(t,e){return t(this._cancelImpl(!1))}.bind(this))};n.skip=function(){return new Promise(function(t,e){this.emit("willSkip");this.emitVAST(lt);return Promise.resolve(this._cancelImpl(!0)).then(function(n){try{this.emit("didSkip");return t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))};n._cancelImpl=function(t){return new Promise(function(e,n){if(this[fn]>=4)return e();this[fn]=6;this.emit("willCancel");var i=function(){try{return Promise.resolve(this._finishTracking()).then(function(t){try{this[mn].reject(new Ae);return e()}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),r=function(t){try{return Promise.resolve(this._onInternalError(t,"cancel")).then(function(e){try{throw t}catch(t){return n(t)}},n)}catch(t){return n(t)}}.bind(this);try{return Promise.resolve(this._internalCallAsync("cancel",[t])).then(function(t){try{this._removeAllListeners();this._stopProgressTimer();this.emit("didCancel");this[fn]=5;return i()}catch(t){return r(t)}}.bind(this),r)}catch(t){r(t)}}.bind(this))};n.dispose=function(){return new Promise(function(t,e){var n;this[fn]=7;this.emit("willDispose");n=null;var i=function(){try{this._removeAllListeners();this._stopProgressTimer();this._maybeRemoveIconSlot();this._maybeRemoveIframeAndSlot();this._maybeRemoveVideoSlot();this.emit("didDispose");this[fn]=8;return Promise.resolve(this._finishTracking()).then(function(i){try{if(null!=n){this[pn].reject(n);return e(n)}this[vn].reject(new Te);return t()}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),r=function(t){try{this._setError(n);n=t;return i()}catch(t){return e(t)}}.bind(this);try{return Promise.resolve(this.disposeInternal()).then(function(t){try{return i()}catch(t){return r(t)}},r)}catch(t){r(t)}}.bind(this))};n.resize=function(t,e,n){return new Promise(function(i,r){void 0===n&&(n="normal");this.emit("willResize");var o=function(t){try{return Promise.resolve(this._onInternalError(t,"resize")).then(function(e){try{throw t}catch(t){return r(t)}},r)}catch(t){return r(t)}}.bind(this);try{return Promise.resolve(this._internalCallAsync("resize",[t,e,n])).then(function(t){try{this.emit("didResize");return function(){try{return i()}catch(t){return r(t)}}()}catch(t){return o(t)}}.bind(this),o)}catch(t){o(t)}}.bind(this))};n.getMediaWidthInternal=function(){return null==this[Xe]?0:this[Xe].mediaFile.width};n.getMediaHeightInternal=function(){return null==this[Xe]?0:this[Xe].mediaFile.height};n.getClientWidthInternal=function(){return this[nn]};n.getClientHeightInternal=function(){return this[rn]};n.getVolumeInternal=function(){throw new _e};n.setVolumeInternal=function(){throw new _e};n.getMutedInternal=function(){throw new _e};n.setMutedInternal=function(){throw new _e};n.loadInternal=function(){return new Promise(function(t,e){return e(new _e)})};n.executeInternal=function(){return new Promise(function(t,e){return e(new _e)})};n.pauseInternal=function(){return new Promise(function(t,e){return e(new _e)})};n.resumeInternal=function(){return new Promise(function(t,e){return e(new _e)})};n.resizeInternal=function(t,e,n){return new Promise(function(n,i){this._resizeSlots(t,e);return n()}.bind(this))};n._resizeSlots=function(t,e){if(null!=this.slot&&null!=this.slot.style){this.slot.style.width=t+"px";this.slot.style.height=e+"px"}};n.cancelInternal=function(){return new Promise(function(t,e){return e(new _e)})};n.disposeInternal=function(){return new Promise(function(t,e){return e(new _e)})};n.emitVAST=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.emit.apply(this,["vast:"+t].concat(n))};n.onVASTError=function(t){this.emitVAST(Y,t);this._onInternalError(t,"VAST error")};n._provisionIframe=function(){return new Promise(function(t,e){var n,i,r,o,s,u;i=(n=this[Xe]).container,r=n.videoSlot,o=n.iframeProperties;s=null!=i?i:null!=r&&null!=r.parentNode&&null!=r.parentNode.ownerDocument?r.parentNode:document.body;return Promise.resolve((u=s.ownerDocument,new Promise(function(t,e){var n,i,r=function(t){return function(r){try{n.cancel();i.cancel();return t&&t.call(this,r)}catch(t){return e(t)}}.bind(this)}.bind(this);if(null!=u.body)return t();n=Ne(u,"body");i=xe(u,"DOMContentLoaded");n.catch(Fe);i.catch(Fe);var o=function(){try{return t()}catch(t){return e(t)}},s=function(t){try{throw t}catch(t){return r(e)(t)}};try{return Promise.resolve(Promise.race([n,i])).then(function(t){try{return r(o)()}catch(t){return s(t)}},s)}catch(t){s(t)}}))).then(function(n){try{return Promise.resolve(De('<!doctype html>\n<html>\n<head>\n<meta charset="utf-8">\n<style>html,body{margin:0;padding:0}</style>\n</head>\n<body>\n</body>\n</html>',We,s)).then(function(n){try{this[Je]=n;Object.assign(this[Je],o);return t()}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),e)}.bind(this))};n._provisionSlot=function(){var t,e;null!=this[Je]?e=(t=this[Je].contentWindow.document).body:null!=this[Xe].container?t=(e=this[Xe].container).ownerDocument:e=(t=document).body;var n=t.createElement("div");Object.assign(n.style,ze);e.appendChild(n);this[Ze]=n};n._maybeRemoveIframeAndSlot=function(){null!=this[Ze]&&null!=this[Ze].parentNode&&this[Ze].parentNode.removeChild(this[Ze]);this[Ze]=null;null!=this[Je]&&null!=this[Je].parentNode&&this[Je].parentNode.removeChild(this[Je]);this[Je]=null};n._provisionIconSlot=function(){var t=this,e=this[Xe],n=e.container,i=e.icons;if(null!=n&&null!=i&&0!==i.length){this[tn]=n.ownerDocument.createElement("div");Ce(this[tn],He,"important");var r=function(){Ce(t[tn],{width:t.clientWidth+"px",height:t.clientHeight+"px",left:.5*(t[Ze].clientWidth-t.clientWidth)+"px",top:.5*(t[Ze].clientHeight-t.clientHeight)+"px"})};this._addListener("didResize",r);r();n.appendChild(this[tn]);this[en]=[];for(var o=Object.create(null),s=0;s<i.length;++s){var u=i[s];if(null!=u.resource&&je(u.resource.$type)){if(null!=u.program&&""!==u.program){if(o[u.program])continue;o[u.program]=!0}var a=Oe(this,u,this[tn].ownerDocument);this[en].push(a);this[tn].appendChild(a.element)}}}};n._maybeRemoveIconSlot=function(){if(null!=this[tn]){this[tn].parentNode.removeChild(this[tn]);this[tn]=null}if(null!=this[en]){for(var t=0;t<this[en].length;++t)this[en][t].dispose();this[en]=null}};n._provisionVideoSlot=function(){this[Ke]=this[Xe].videoSlot;if(null==this[Ke]){this[un]=!0;var t=null!=this[Xe].container?this[Xe].container:document.body,e=this._determineVideoSlotCreationDocument(t).createElement("video");e.setAttribute("playsinline","true");e.setAttribute("webkit-playsinline","true");Object.assign(e.style,$e);t.insertBefore(e,this[Je]);this[Ke]=e}};n._maybeRemoveVideoSlot=function(){if(this[un]&&null!=this[Ke]){null!=this[Ke].parentNode&&this[Ke].parentNode.removeChild(this[Ke]);this[Ke]=null}};n._determineVideoSlotCreationDocument=function(t){return t.ownerDocument};n._setDefaultDimensions=function(){var t=this.mediaWidth>0&&this.mediaHeight>0?this.mediaWidth/this.mediaHeight:16/9;this[on]=this[Ze].clientWidth;this[sn]=this[Ze].clientHeight;if(t<this[on]/this[sn]){this[rn]=this[sn];this[nn]=Math.round(t*this[rn])}else{this[nn]=this[on];this[rn]=Math.round(this[nn]/t)}};n._addAllListeners=function(){var t=this;if(null!=this[Xe].trackingEvents){var e=!1;this[Xe].trackingEvents.types.forEach(function(n){n===ht?e=!0:t._addListener("vast:"+n,function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];t._onVastEvent.apply(t,[n].concat(i))})});if(e){this._indexProgressEvents();this._addProgressListeners()}}};n._addListener=function(t,e){var n=e.bind(this);this.on(t,n);this[Ye].push({type:t,listener:n})};n._removeAllListeners=function(){var t=this;this[Ye].forEach(function(e){var n=e.type,i=e.listener;t.removeListener(n,i)});this[Ye].length=0};n._onVastEvent=function(t,e){var n=this;void 0===e&&(e={});null!=this[Xe].trackingEvents&&this[Xe].trackingEvents.get(t).forEach(function(i){var r=i.uri;n._track(t,r,e)})};n._emitClickThrough=function(t){var e=this;void 0===t&&(t=null);"boolean"!=typeof(t=Object.assign({},t)).playerHandles&&(t.playerHandles=!0);if(null!=this[Xe].videoClicks){"string"!=typeof t.url&&null!=this[Xe].videoClicks.clickThrough&&(t.url=this[Xe].videoClicks.clickThrough.uri);this[Xe].videoClicks.clickTrackings.forEach(function(t){var n=t.uri;e._track("clickThrough",n,{})})}this.emit("clickThrough",t);null!=this[Xe].clickthroughHandler?this[Xe].clickthroughHandler(t):t.playerHandles&&null!=t.url&&window.open(t.url,"_blank")};n._indexProgressEvents=function(){var t=this;this[ln]=[];this[hn]=[];this[Xe].trackingEvents.get(ht).filter(function(t){return null!=t.offset}).forEach(function(e){e.offset instanceof H||"RelativeTimeOffset"===e.offset.$type?t[hn].push(e):(e.offset instanceof z||"AbsoluteTimeOffset"===e.offset.$type)&&t[ln].push(e)});this[ln].sort(Qe);this[hn].sort(Qe)};n._addProgressListeners=function(){this._addListener("vast:start",this._startProgressTimer);this._addListener("vast:resume",this._startProgressTimer);this._addListener("vast:pause",this._stopProgressTimer);this._addListener("vast:complete",this._stopProgressTimer)};n._startProgressTimer=function(){null==this[an]&&this._hasRemainingProgressEvents()&&(this[an]=setInterval(this[cn],250))};n._stopProgressTimer=function(){if(null!=this[an]){clearInterval(this[an]);this[an]=null;this._onProgressTimer()}};n._onProgressTimer=function(){var t=this.remainingTime,e=this.duration;if(!(isNaN(t)||t<0||isNaN(e)||e<=0||t>e)){var n=e-t,i=100*n/e;this._dispatchProgressEvents(this[ln],n);this._dispatchProgressEvents(this[hn],i);this._hasRemainingProgressEvents()||this._stopProgressTimer()}};n._dispatchProgressEvents=function(t,e){for(var n=this,i=t.length;i>0&&e>=t[i-1].offset.value;)--i;if(i<t.length){t.splice(i).forEach(function(t){var e=t.uri,i=t.offset;n._track("progress",e,{offset:i})})}};n._hasRemainingProgressEvents=function(){return this[ln].length+this[hn].length>0};n._track=function(t,e,n){void 0===n&&(n={});var i=this.config.trackingHandler;null!=i&&i(t,e,n)};n._internalCallSync=function(t,e,n){void 0===e&&(e=[]);void 0===n&&(n=!1);try{return this[t+"Internal"].apply(this,e)}catch(e){n||this._onInternalError(e,t).catch(function(n){console.warn("Failed to handle error from "+t+": "+e);console.warn("Error handler failed with: "+n)});throw e}};n._internalCallAsync=function(t,e){return new Promise(function(n,i){var r;void 0===e&&(e=[]);r=this[t+="Internal"].apply(this,e);return Promise.resolve(Promise.race([r,this[pn].promise,this[mn].promise,this[vn].promise])).then(function(t){try{return n(t)}catch(t){return i(t)}},i)}.bind(this))};n._onInternalError=function(t,e){void 0===e&&(e=null);if(Ge(t))return Promise.resolve();this._setError(t);this[pn].reject(t);return this.dispose().catch(function(){})};n._setError=function(t){if(null==this[gn]){this[gn]=t;this.emit("error",t)}};n._finishTracking=function(){return new Promise(function(t,e){this.emit("willFinishTracking");return Promise.resolve(Jt()).then(function(n){try{this.emit("didFinishTracking");return t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))};u(e,[{key:"config",get:function(){return this[Xe]}},{key:"iframe",get:function(){return this[Je]}},{key:"slot",get:function(){return this[Ze]}},{key:"videoSlot",get:function(){return this[Ke]}},{key:"mediaWidth",get:function(){return this._internalCallSync("getMediaWidth",[],!0)}},{key:"mediaHeight",get:function(){return this._internalCallSync("getMediaHeight",[],!0)}},{key:"clientWidth",get:function(){return this._internalCallSync("getClientWidth",[],!0)}},{key:"clientHeight",get:function(){return this._internalCallSync("getClientHeight",[],!0)}},{key:"maxWidth",get:function(){return this[on]}},{key:"maxHeight",get:function(){return this[sn]}},{key:"volume",get:function(){return this._internalCallSync("getVolume",[],!0)},set:function(t){this._internalCallSync("setVolume",[t])}},{key:"muted",get:function(){return this._internalCallSync("getMuted",[],!0)},set:function(t){if(t!==this.muted){this._internalCallSync("setMuted",[t]);this.emitVAST(t?it:rt)}}},{key:"paused",get:function(){throw new _e}},{key:"remainingTime",get:function(){throw new _e}},{key:"duration",get:function(){throw new _e}}]);return e}(Se),bn={tr:{regexp:/[\u0069]/g,map:{i:""}},az:{regexp:/[\u0069]/g,map:{i:""}},lt:{regexp:/[\u0069\u006A\u012F]\u0307|\u0069\u0307[\u0300\u0301\u0303]/g,map:{"i":"I","j":"J","":"","i":"","i":"","i":""}}},kn=function(t,e){var n=bn[e];t=null==t?"":String(t);n&&(t=t.replace(n.regexp,function(t){return n.map[t]}));return t.toUpperCase()},wn=Object.freeze({default:kn,__moduleExports:kn}),An=wn&&kn||wn,Tn=function(t,e){if(null==t)return"";t=String(t);return An(t.charAt(0),e)+t.substr(1)},Sn={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdSizeChange:"AdSizeChange",AdLinearChange:"AdLinearChange",AdDurationChange:"AdDurationChange",AdExpandedChange:"AdExpandedChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdLog:"AdLog",AdError:"AdError"},En=[Sn.AdLoaded,Sn.AdStarted,Sn.AdStopped,Sn.AdSkipped,Sn.AdImpression,Sn.AdVideoStart,Sn.AdVideoFirstQuartile,Sn.AdVideoMidpoint,Sn.AdVideoThirdQuartile,Sn.AdVideoComplete,Sn.AdError],Pn=((ve={})[Sn.AdDurationChange]="durationchange",ve[Sn.AdVolumeChange]="volumechange",ve),In=((ge={})[Sn.AdSkipped]=lt,ge[Sn.AdStarted]=J,ge[Sn.AdImpression]=X,ge[Sn.AdVideoStart]=Z,ge[Sn.AdVideoFirstQuartile]=K,ge[Sn.AdVideoMidpoint]=tt,ge[Sn.AdVideoThirdQuartile]=et,ge[Sn.AdVideoComplete]=nt,ge[Sn.AdUserAcceptInvitation]=at,ge[Sn.AdUserMinimize]=ut,ge[Sn.AdUserClose]=ct,ge[Sn.AdPaused]=ot,ge[Sn.AdPlaying]=st,ge),Vn=-2,Cn=[],xn=function(t){Cn.push(t);return Cn.length-1},Ln=function(t){return t>=0&&t<Cn.length?'"'+Cn[t]+'"':"<unknown>"},Dn=xn("empty"),Mn=xn("loading"),Rn=xn("loaded"),On=xn("starting"),jn=xn("started"),Nn=xn("completed"),Fn=xn("terminating"),Un=xn("terminated"),Wn=xn("error"),zn=((ye={})[Sn.AdLoaded]=[Mn,Fn],ye[Sn.AdStarted]=[On,On],ye[Sn.AdStopped]=[Mn,Fn],ye[Sn.AdSkipped]=[Mn,Fn],ye[Sn.AdSkippableStateChange]=[Mn,Fn],ye[Sn.AdSizeChange]=[Mn,Fn],ye[Sn.AdLinearChange]=[Mn,Fn],ye[Sn.AdDurationChange]=[Mn,Fn],ye[Sn.AdExpandedChange]=[Mn,Fn],ye[Sn.AdRemainingTimeChange]=[Mn,Fn],ye[Sn.AdVolumeChange]=[Mn,Fn],ye[Sn.AdImpression]=[On,Nn],ye[Sn.AdVideoStart]=[On,Nn],ye[Sn.AdVideoFirstQuartile]=[On,Fn],ye[Sn.AdVideoMidpoint]=[On,Fn],ye[Sn.AdVideoThirdQuartile]=[On,Fn],ye[Sn.AdVideoComplete]=[On,Fn],ye[Sn.AdClickThru]=[On,Nn],ye[Sn.AdInteraction]=[Mn,Nn],ye[Sn.AdUserAcceptInvitation]=[On,Nn],ye[Sn.AdUserMinimize]=[On,Fn],ye[Sn.AdUserClose]=[On,Fn],ye[Sn.AdPaused]=[Mn,Fn],ye[Sn.AdPlaying]=[On,Nn],ye),Hn=Symbol("state"),$n=Symbol("vpaid"),Bn=Symbol("listeners"),qn=Symbol("wasMuted"),Qn=Symbol("volume"),Gn=Symbol("muted"),Xn=Symbol("paused"),Yn=Symbol("width"),Jn=Symbol("height"),Zn=Symbol("timeouts"),Kn=Symbol("receiving"),ti=Symbol("erroring"),ei=Symbol("playbackStarted"),ni=Symbol("fallbackDuration"),ii=Symbol("fallbackElapsedTime"),ri=function(t){a(e,t);function e(e){var n;(n=t.call(this,e)||this)[Hn]=Dn;n[$n]=null;n[Bn]=Object.create(null);n[qn]=!1;n[Qn]=Vn;n[Gn]=!1;n[Xn]=!0;n[Yn]=0;n[Jn]=0;n[Zn]=[];n[Kn]={};n[ti]=St();n[ei]=null;n[ii]=0;n[ni]=Vn;return n}var n=e.prototype;n.getClientWidthInternal=function(){return this[Yn]||t.prototype.getClientWidthInternal.call(this)};n.getClientHeightInternal=function(){return this[Jn]||t.prototype.getClientHeightInternal.call(this)};n.getVolumeInternal=function(){return null==this[$n]||this[Gn]?this[Qn]:this._getVpaidProperty("adVolume")};n.setVolumeInternal=function(t){this[Qn]=t;null!=this[$n]&&this._vpaidCall("setAdVolume",[t])};n.getMutedInternal=function(){return this[Gn]};n.setMutedInternal=function(t){this[Gn]=t;null!=this.videoSlot&&(this.videoSlot.muted=t);if(null!=this[$n]){var e=this[Gn]?0:this[Qn];this._vpaidCall("setAdVolume",[e])}};n.loadInternal=function(){return new Promise(function(t,e){this._assertVpaidState("load",Dn);this._setVpaidState(Mn);this._startReceiving(Sn.AdLoaded);return Promise.resolve(this.setUp()).then(function(n){try{var i=function(){try{this._performAdInit();return Promise.resolve(this._finishReceiving(Sn.AdLoaded)).then(function(n){try{this._setVpaidState(Rn);return t()}catch(t){return e(t)}}.bind(this),e)}catch(t){return e(t)}}.bind(this),r=function(t){try{throw new be(401,null,t)}catch(t){return e(t)}};try{return Promise.resolve(this.loadMediaFile()).then(function(t){try{return i()}catch(t){return r(t)}},r)}catch(t){r(t)}}catch(t){return e(t)}}.bind(this),e)}.bind(this))};n.executeInternal=function(t){return new Promise(function(e,n){var i,r;this._assertVpaidState("execute",Rn);this._setVpaidState(On);this._startReceiving(Sn.AdStopped);i=this._finishReceiving(Sn.AdStopped);r=this._callAndReceive("startAd",[],Sn.AdStarted,this.config.adStartTimeout);return Promise.resolve(Promise.race([r,i])).then(function(r){try{var o=function(){return Promise.resolve(i).then(function(t){try{return e()}catch(t){return n(t)}},n)};return t?Promise.resolve(Promise.race([this.pauseInternal(),i])).then(function(t){try{return o.call(this)}catch(t){return n(t)}}.bind(this),n):o.call(this)}catch(t){return n(t)}}.bind(this),n)}.bind(this))};n.pauseInternal=function(){return new Promise(function(t,e){this._assertVpaidState("pause",On,jn);return Promise.resolve(this._callAndReceive("pauseAd",[],Sn.AdPaused)).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};n.resumeInternal=function(){return new Promise(function(t,e){this._assertVpaidState("resume",On,jn);return Promise.resolve(this._callAndReceive("resumeAd",[],Sn.AdPlaying)).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};n.resizeInternal=function(e,n,i){return new Promise(function(r,o){if(null==this[$n]){this.maxWidth=e;this.maxHeight=n;this.emit(Sn.AdSizeChange,[e,n,i]);return s.call(this)}this._assertVpaidState("resize",Mn,jn);return Promise.resolve(t.prototype.resizeInternal.call(this,e,n,i)).then(function(t){try{var r=function(){return s.call(this)};return e!==this.clientWidth||n!==this.clientHeight?Promise.resolve(this._callAndReceive("resizeAd",[e,n,i],Sn.AdSizeChange)).then(function(t){try{return r.call(this)}catch(t){return o(t)}}.bind(this),o):r.call(this)}catch(t){return o(t)}}.bind(this),o);function s(){return r()}}.bind(this))};n.cancelInternal=function(t){return new Promise(function(e,n){this._assertVpaidState("cancel",On,jn);this._terminate(t);return e()}.bind(this))};n.disposeInternal=function(){return new Promise(function(t,e){var n=function(){try{this._clearTimeouts();this._maybeTearDown();return t()}catch(t){return e(t)}}.bind(this),i=function(t){try{return n()}catch(t){return e(t)}};try{return Promise.resolve(this._terminate(!1)).then(function(t){try{return n()}catch(t){return i()}},i)}catch(t){i()}}.bind(this))};n._terminate=function(t){return new Promise(function(e,n){var i;this._clearTimeouts();if(this[Hn]>=Nn)return e();this._setVpaidState(Fn);this._startReceiving(Sn.AdStopped);i=!1;if(t)try{this[$n].skipAd()}catch(t){i=!0}else i=!0;var r=function(){try{this._unsubscribeAll();this._setVpaidState(Un);return e()}catch(t){return n(t)}}.bind(this),o=function(t){try{this._onVpaidError(t);return e()}catch(t){return n(t)}}.bind(this);try{i&&this._callVpaidFunction("stopAd");return Promise.resolve(this._finishReceiving(Sn.AdStopped,this.config.adStopTimeout)).then(function(t){try{return r()}catch(t){return o(t)}},o)}catch(t){o(t)}}.bind(this))};n.setUp=function(){return new Promise(function(t,e){return e(new _e)})};n.tearDown=function(){throw new _e};n.loadMediaFile=function(){return new Promise(function(t,e){return e(new _e)})};n.getVPAIDAd=function(){throw new _e};n.getEnvironmentVars=function(){return{}};n._rememberDimensions=function(){this[Yn]=this._getVpaidProperty("adWidth");this[Jn]=this._getVpaidProperty("adHeight")};n._onVpaidPlaying=function(){this[Xn]=!1;null==this[ei]&&(this[ei]=(new Date).getTime())};n._onVpaidPaused=function(){this[Xn]=!0;if(null!=this[ei]){this[ii]+=this._computeIntermediateElapsedTime();this[ei]=null}};n._storeFallbackDuration=function(t){void 0===t&&(t=!1);if(t||!(this[ni]>=0)){var e=Vn;try{e=this._getVpaidProperty("adDuration")}catch(t){}if(e>=0)this[ni]=e;else{var n=Vn;try{n=this._getVpaidProperty("adRemainingTime")}catch(t){}this[ni]=n>=0?this._computeIntermediateElapsedTime()+n:-2}}};n._computeIntermediateElapsedTime=function(){return null!=this[ei]?((new Date).getTime()-this[ei])/1e3:0};n._performAdInit=function(){this[$n]=this.getVPAIDAd();this._handshakeVersion();this._subscribeAll();this._initAd()};n._subscribeAll=function(){for(var t=this,e=Object.keys(Sn).map(function(t){return Sn[t]}),n=function(n){var i=e[n],r=En.indexOf(i)>=0,o=function e(){var n=null!=t[Bn][i];if(r){delete t[Bn][i];try{t[$n].unsubscribe(e,i)}catch(t){}}if(n)try{for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];t._onVpaidEvent.apply(t,[i].concat(s))}catch(e){t._onVpaidError("Failed to handle '"+i+"': "+e)}};t[$n].subscribe(o,i);t[Bn][i]=o},i=0;i<e.length;++i)n(i)};n._unsubscribeAll=function(){for(var t=Object.keys(this[Bn]),e=0;e<t.length;++e){var n=t[e],i=this[Bn][n];try{this[$n].unsubscribe(i,n)}catch(t){}}this[Bn]=Object.create(null)};n._onVpaidEvent=function(t){var e=zn[t];if(null!=e&&(this[Hn]<e[0]||this[Hn]>e[1]))this._onVpaidError('Event "'+t+'" not allowed in state '+Ln(this[Hn])+", must be between "+Ln(e[0])+" and "+Ln(e[1]));else{for(var n="$on"+t,i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];null!=this[n]&&this[n].apply(this,r);null!=this[Kn][t]&&this[Kn][t].resolve();this.emit.apply(this,["vpaid:"+t].concat(r));var s=Pn[t];null!=s&&this.emit(s);null!=In[t]&&this.emitVAST(In[t])}};n._handshakeVersion=function(){return this._callVpaidFunction("handshakeVersion",["2.0"])};n._initAd=function(){var t={AdParameters:this.config.adParameters},e=this.getEnvironmentVars();this._callVpaidFunction("initAd",[this.maxWidth,this.maxHeight,"normal",-2,t,e])};n._callVpaidFunction=function(t,e){void 0===e&&(e=[]);if(null==this[$n])throw new be(901,'Failed to call VPAID function "'+t+'": VPAID not available');return this._vpaidCall(t,e)};n._getVpaidProperty=function(t){return null!=this[$n]?this._vpaidCall("get"+Tn(t),[],!0):Vn};n._vpaidCall=function(t,e,n){void 0===e&&(e=[]);void 0===n&&(n=!1);try{var i;return(i=this[$n])[t].apply(i,e)}catch(i){var r=new ke(t,e,i);n||this._onVpaidError(r);throw r}};n._callAndReceive=function(t,e,n,i){return new Promise(function(r,o){this._startReceiving(n);this._callVpaidFunction(t,e);return Promise.resolve(this._finishReceiving(n,i)).then(function(t){try{return r()}catch(t){return o(t)}},o)}.bind(this))};n._startReceiving=function(t){this[Kn][t];this[Kn][t]=St()};n._finishReceiving=function(t,e){return new Promise(function(n,i){var r,o,s;if(null==this[Kn][t])return n();r=this[Kn][t].promise;o=e>0?this._timeoutAfter(r,e):r;s=t!==Sn.AdError?Promise.race([o,this[ti].promise]):o;var u=function(e){try{throw new be(901,"Failed to receive "+t+": "+e)}catch(t){return i(t)}};try{return Promise.resolve(s).then(function(t){try{return function(){try{return n()}catch(t){return i(t)}}()}catch(t){return u(t)}},u)}catch(t){u(t)}}.bind(this))};n._timeoutAfter=function(t,e){var n=this,i=St(),r=setTimeout(function(){i.reject(new be(901,"Timed out"))},e),o=function(t){clearTimeout(r);for(var e=0;e<n[Zn].length&&n[Zn][e]!==r;)++e;e<n[Zn].length&&n[Zn].splice(e,1);if(null!=t)throw t};this[Zn].push(r);return Promise.race([t,i.promise]).then(function(){return o()},function(t){return o(t)})};n._clearTimeouts=function(){for(var t=0;t<this[Zn].length;++t)clearTimeout(this[Zn][t]);this[Zn].length=0};n._setVpaidState=function(t){this[Hn]>t||(this[Hn]=t)};n._assertVpaidState=function(t,e,n){void 0===n&&(n=e);if(this[Hn]<Fn&&(this[Hn]<e||this[Hn]>n))throw new be(901,"VPAID state "+this[Hn]+" must be between "+Ln(e)+" and "+Ln(n)+' for operation "'+t+'"')};n._onVpaidError=function(t){if(this[Hn]!==Wn){this._setVpaidState(Wn);var e="string"==typeof t?[new be(901,t),t]:null!=t&&"string"==typeof t.message?[t,t.message]:[new be(901),null],n=e[0],i=e[1];this.onVASTError(t instanceof be?t:new be(901,i,t));this._maybeTearDown();this[ti].reject(n)}};n._maybeTearDown=function(){if(null!=this[$n]){this[$n]=null;this.tearDown()}};n["$on"+Sn.AdLoaded]=function(){var t=this._getVpaidProperty("adVolume");this[qn]=0===t;var e=this[Gn]?0:this[Qn];this[Qn]=t;e>=0&&e!==t&&this._vpaidCall("setAdVolume",[e]);this._rememberDimensions()};n["$on"+Sn.AdStarted]=function(){this[Hn]===On&&this._setVpaidState(jn);this._onVpaidPlaying();this._storeFallbackDuration()};n["$on"+Sn.AdVideoStart]=function(){this._onVpaidPlaying();this._storeFallbackDuration()};n["$on"+Sn.AdVideoFirstQuartile]=function(){this._storeFallbackDuration()};n["$on"+Sn.AdVideoMidpoint]=function(){this._storeFallbackDuration()};n["$on"+Sn.AdVideoThirdQuartile]=function(){this._storeFallbackDuration()};n["$on"+Sn.AdVideoComplete]=function(){this._storeFallbackDuration()};n["$on"+Sn.AdPlaying]=function(){this._onVpaidPlaying()};n["$on"+Sn.AdPaused]=function(){this._onVpaidPaused()};n["$on"+Sn.AdStopped]=function(){this[Hn]===jn&&this._setVpaidState(Nn);this._onVpaidPaused()};n["$on"+Sn.AdSizeChange]=function(){this._rememberDimensions();this._resizeSlots(this.clientWidth,this.clientHeight);this.emit("resize")};n["$on"+Sn.AdDurationChange]=function(){this._storeFallbackDuration(!0)};n["$on"+Sn.AdVolumeChange]=function(){var t=this._getVpaidProperty("adVolume");this[Gn]||(this[Qn]=t);var e=0===t;if(this[qn]!==e){this[qn]=e;this.emitVAST(e?it:rt)}};n["$on"+Sn.AdClickThru]=function(t,e,n){if(null!=t&&null==e&&null==n&&"object"===o()(t)){var i=t;t=i.url;e=i.id;n=i.playerHandles}var r={url:"string"==typeof t&&""!==t?t:null,id:"string"==typeof e?e:null,playerHandles:"boolean"!=typeof n||n};this._emitClickThrough(r)};n["$on"+Sn.AdError]=function(t){this[Xn]=!0;this._onVpaidError(t)};u(e,[{key:"remainingTime",get:function(){var t=this._getVpaidProperty("adRemainingTime");return t>=0?t:this.duration-(this[ii]+this._computeIntermediateElapsedTime())}},{key:"duration",get:function(){var t=this._getVpaidProperty("adDuration");return t>0?t:this[ni]}},{key:"paused",get:function(){return this[Xn]}}]);return e}(_n),oi=Symbol("window"),si=Symbol("document"),ui=Symbol("script"),ai=function(t){a(e,t);function e(){return t.apply(this,arguments)||this}e.canExecute=function(t){var e=t.type;return"VPAID"===t.apiFramework&&("application/x-javascript"===e||"application/javascript"===e)};var n=e.prototype;n._determineVideoSlotCreationDocument=function(e){return this.config.iframeDisabled?t.prototype._determineVideoSlotCreationDocument.call(this,e):this.iframe.contentWindow.document};n.setUp=function(){return new Promise(function(t,e){if(this.config.iframeDisabled){this[si]=this.slot.ownerDocument||document;this[oi]=this[si].defaultView||this[si].parentWindow||window}else{this[oi]=this.iframe.contentWindow;this[si]=this[oi].document}return t()}.bind(this))};n.tearDown=function(){null!=this[ui]&&null!=this[ui].parentNode&&this[ui].parentNode.removeChild(this[ui]);this[ui]=null;this[oi]=null;this[si]=null;null!=this.videoSlot&&this.videoSlot.pause()};n.loadMediaFile=function(){return new Promise(function(t,e){var n,i,r,s,u;i=(n=this.config).mediaFile,r=n.vpaidCrossOrigin;u="string"===(s=o()(r))?r:"function"===s?r(i):null;i.uri.indexOf(".ztkcdn.net/")>0&&(this[oi]["be05ec6f-b325-41b1-b96f-2916d0998a25"]={type:pe.type,sampleRate:pe.sampleRate,client:$t()._clientId,dimensions:pe.dimensions,metrics:pe.metrics});return Promise.resolve(function(t,e,n){return new Promise(function(i,r){return i(new Promise(function(i,r){var o=n.createElement("script");n.getElementsByTagName("head")[0].appendChild(o);o.addEventListener("load",function(){return i(o)});o.addEventListener("error",function(){return r(new Error("Error loading script: "+t))});o.crossOrigin=e;o.src=t}))})}(i.uri,u,this[si])).then(function(n){try{this[ui]=n;pe.track("loadedScript");return t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))};n.getVPAIDAd=function(){return this[oi].getVPAIDAd()};n.getEnvironmentVars=function(){var t;return(t={slot:this.slot,videoSlot:this.videoSlot,videoSlotCanAutoPlay:this.config.videoSlotCanAutoPlay})["f1919dcc-4411-4326-a753-1776a4381cda"]={name:"iab-vast",version:"0.51.2"},t};return e}(ri),ci=[K,tt,et,nt],li=/^https?:\/\//i,hi={},di=document.createElement("video"),fi=Symbol("mouseCatcher"),pi=Symbol("resumeButton"),mi=Symbol("videoListeners"),vi=Symbol("isMuted"),gi=Symbol("isVideoLoaded"),yi=Symbol("hasImpressed"),_i=Symbol("hasPlayed"),bi=Symbol("receivingCanplay"),ki=Symbol("executing"),wi=Symbol("completion"),Ai=Symbol("cssSuffix"),Ti=Symbol("volume"),Si=Symbol("errored"),Ei={"vpaid-js":ai,video:function(t){a(e,t);e.canExecute=function(t,e){var n=t.type,i=t.apiFramework,r=t.delivery,o=t.uri,s=e.mediaFileDeliveryIgnored;return null==i&&""!==di.canPlayType(n)&&("streaming"!==r||s&&li.test(o))};function e(e){var n;(n=t.call(this,e)||this)[mi]=[];n[vi]=!1;n[gi]=!1;n[yi]=!1;n[_i]=!1;n[bi]=null;n[ki]=null;n[wi]=0;n[Ai]="-"+(new Date).getTime();n[Ti]=1;n[Si]=!1;return n}var n=e.prototype;n.getMediaWidthInternal=function(){return this.videoSlot&&this.videoSlot.videoWidth||t.prototype.getMediaWidthInternal.call(this)};n.getMediaHeightInternal=function(){return this.videoSlot&&this.videoSlot.videoHeight||t.prototype.getMediaHeightInternal.call(this)};n.getClientWidthInternal=function(){return this.videoSlot&&this.videoSlot.clientWidth||t.prototype.getClientWidthInternal.call(this)};n.getClientHeightInternal=function(){return this.videoSlot&&this.videoSlot.clientHeight||t.prototype.getClientHeightInternal.call(this)};n.getVolumeInternal=function(){return null!=this.videoSlot&&"number"==typeof this.videoSlot.volume?this.videoSlot.volume:this[Ti]};n.setVolumeInternal=function(t){this[Ti]=t;null!=this.videoSlot&&"number"==typeof this.videoSlot.volume?this.videoSlot.volume=t:this._onVolumechange()};n.getMutedInternal=function(){return null!=this.videoSlot&&this.videoSlot.muted};n.setMutedInternal=function(t){null!=this.videoSlot&&(this.videoSlot.muted=t)};n.loadInternal=function(){return new Promise(function(t,e){this._createStyle();this._addMouseCatcher();this.config.clickToResume&&!this.config.clickToResumeHidden&&this._addResumeButton();if(this.config.preloadVideo){this.videoSlot.autoplay=!1;this._maybeLoadVideo();return Promise.resolve(this[bi].promise).then(function(t){try{return n.call(this)}catch(t){return e(t)}}.bind(this),e)}function n(){return t()}return n.call(this)}.bind(this))};n.executeInternal=function(t){return new Promise(function(e,n){this._addVideoListeners();this._maybeLoadVideo();this[vi]=this.videoSlot.muted;"number"==typeof this.videoSlot.volume&&(this[Ti]=this.videoSlot.volume);if(this.videoSlot.readyState<3)return Promise.resolve(this[bi].promise).then(function(t){try{return i.call(this)}catch(t){return n(t)}}.bind(this),n);function i(){this.videoSlot.pause();t||this._attemptPlay();this[ki]=St();return Promise.resolve(this[ki].promise).then(function(t){try{return e()}catch(t){return n(t)}},n)}return i.call(this)}.bind(this))};n.pauseInternal=function(){return new Promise(function(t,e){this.videoSlot.pause();return t()}.bind(this))};n.resumeInternal=function(){return new Promise(function(t,e){this._attemptPlay();return t()}.bind(this))};n.cancelInternal=function(){this._removeMouseCatcher();this._removeVideoListeners();this.videoSlot.pause();return Promise.resolve()};n.disposeInternal=function(){this.cancelInternal();if(null!=this.videoSlot.removeAttribute){this.videoSlot.removeAttribute("src");this.videoSlot.load()}else this.videoSlot.src="";return Promise.resolve()};n._maybeLoadVideo=function(){if(!this[gi]){this[gi]=!0;this[bi]=St();this._addVideoListener("canplay",this._onCanplay);this.videoSlot.src=this.config.mediaFile.uri;this.videoSlot.load();this._reachPlayableState()}};n._attemptPlay=function(){var t=this.videoSlot.play();null!=t&&"function"==typeof t.catch&&t.catch(function(){})};n._reachPlayableState=function(){return new Promise(function(t,e){var n,i,r,o=function(t){return function(n){try{i.clear();return t&&t.call(this,n)}catch(t){return e(t)}}.bind(this)}.bind(this);if(this.videoSlot.readyState>=3){this._onCanplay();return t()}n=this.config.loadVideoTimeout;i=Ve(n,hi);r=null;var s=function(){try{r===hi&&this._emitVASTMediaError(402);return t()}catch(t){return e(t)}}.bind(this),u=function(t){try{throw t}catch(t){return o(e)(t)}};try{return Promise.resolve(Promise.race([this[bi].promise,i])).then(function(t){try{r=t;return o(s)()}catch(t){return u(t)}},u)}catch(t){u(t)}}.bind(this))};n._addVideoListeners=function(){this._addVideoListener("playing",this._onPlaying);this._addVideoListener("pause",this._onPause);this._addVideoListener("timeupdate",this._onTimeupdate);this._addVideoListener("ended",this._onEnded);this._addVideoListener("volumechange",this._onVolumechange);this._addVideoListener("durationchange",this._onDurationChange);this._addVideoListener("resize",this._onResize);this._addVideoListener("error",this._onVideoError)};n._addVideoListener=function(t,e){var n=e.bind(this);this.videoSlot.addEventListener(t,n);this[mi].push({type:t,listener:n})};n._removeVideoListeners=function(){var t=this;this[mi].forEach(function(e){var n=e.type,i=e.listener;t.videoSlot.removeEventListener(n,i)});this[mi]=[]};n._addMouseCatcher=function(){var t=this.slot.ownerDocument;this[fi]=t.createElement("div");this[fi].id="mouse-catcher"+this[Ai];this[fi].addEventListener("click",this._onVideoClick.bind(this));this.slot.insertBefore(this[fi],this.slot.firstChild)};n._addResumeButton=function(){var t=this.slot.ownerDocument;this[pi]=t.createElement("div");this[pi].id="resume-button"+this[Ai];this.slot.insertBefore(this[pi],this.slot.firstChild)};n._setResumeButtonVisible=function(t){null!=this[pi]&&this[pi].style.setProperty("display",t?"block":"none","important")};n._createStyle=function(){var t,e=this.slot.ownerDocument,n=e.createElement("style");n.textContent="\n#resume-button"+(t=this[Ai])+", #mouse-catcher"+t+" {\n  position: absolute !important;\n  left: 0 !important;\n  top: 0 !important;\n  width: 100% !important;\n  height: 100% !important;\n}\n\n#resume-button"+t+" {\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNTAgMzUwIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PHBhdGggZD0iTTE3NSAwQzc4LjM0MyAwIDAgNzguMzQzIDAgMTc1YzAgOTYuNjU2IDc4LjM0MyAxNzUgMTc1IDE3NSA5Ni42NTYgMCAxNzUtNzguMzQ0IDE3NS0xNzVDMzUwIDc4LjM0MyAyNzEuNjU2IDAgMTc1IDB6bTgzLjczOCAxODkuMDVsLTEwNC4zODYgNzEuODEyYTE3LjA3MyAxNy4wNzMgMCAwIDEtMTcuNjAzIDEuMDU1Yy01LjYwNS0yLjk2NS05LjEyNS04Ljc3Ny05LjEyNS0xNS4xMDNWMTAzLjE4OGMwLTYuMzI2IDMuNTItMTIuMTM5IDkuMTI1LTE1LjEwNGExNy4wNzQgMTcuMDc0IDAgMCAxIDE3LjYwMyAxLjA1NWwxMDQuMzg2IDcxLjgxMWExNy4wNzIgMTcuMDcyIDAgMCAxIDcuMzg3IDE0LjA1IDE3LjA3IDE3LjA3IDAgMCAxLTcuMzg3IDE0LjA1eiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjUpIi8+PC9zdmc+) !important;\n  background-size: 25% !important;\n  background-repeat: no-repeat !important;\n  background-position: 50% 50% !important;\n  display: none !important;\n}\n\n#mouse-catcher"+t+" {\n  cursor: pointer !important;\n}\n";e.querySelector("head").appendChild(n)};n._removeMouseCatcher=function(){if(null!=this[fi]&&null!=this[fi].parentNode){this[fi].parentNode.removeChild(this[fi]);this[fi]=null}};n._onCanplay=function(){this[bi].resolve()};n._rejectPendingPromises=function(t){null!=this[bi]&&this[bi].reject(t);null!=this[ki]&&this[ki].reject(t)};n._onPlaying=function(){this._onRendering();if(this[_i])this.emitVAST(st);else{this[_i]=!0;this.emitVAST(Z)}this._setResumeButtonVisible(!1)};n._onPause=function(){if(this[_i]&&!this.videoSlot.ended){this.emitVAST(ot);this._setResumeButtonVisible(!0)}};n._onTimeupdate=function(){var t=this._computePlayedTime();t>0&&this._onRendering();var e=this.duration;if(e>0)for(var n=e-t<Math.min(.5,e/10)?4:Math.floor(4*t/e);this[wi]<n;){this.emitVAST(ci[this[wi]]);++this[wi]}};n._onRendering=function(){if(!this[yi]){this[yi]=!0;this.emitVAST(J);this.emitVAST(X)}};n._computePlayedTime=function(){if(null!=this.videoSlot.played){var t=this.videoSlot.played;return Array.apply(null,{length:t.length}).reduce(function(e,n,i){return e+t.end(i)-t.start(i)},0)}return this.videoSlot.currentTime};n._onEnded=function(){this[ki].resolve()};n._onVolumechange=function(){var t=0===this.getVolumeInternal();if(t||this.videoSlot.muted){if(!this[vi]){this[vi]=!0;this.emitVAST(it)}}else if(!t&&this[vi]){this[vi]=!1;this.emitVAST(rt)}this.emit("volumechange")};n._onDurationChange=function(){this.emit("durationchange")};n._onResize=function(){this.emit("resize")};n._onVideoClick=function(){if(this[yi])if(this.videoSlot.ended)this._emitClickThrough();else if(this.config.clickToResume)if(this.videoSlot.paused)this.resumeInternal();else{this._emitClickThrough();this.pauseInternal()}else this._emitClickThrough()};n._onVideoError=function(){if(null!=this.videoSlot.error){var t=this.videoSlot.error,e=2===t.code?402:405;this._emitVASTMediaError(e,t)}else this._emitVASTMediaError(405)};n._emitVASTMediaError=function(t,e){if(!this[Si]){this[Si]=!0;var n=null!=e?"Media error "+e.code:null,i=new be(t,n,e);this._rejectPendingPromises(i);this.onVASTError(i)}};u(e,[{key:"remainingTime",get:function(){return this.duration-(this.videoSlot&&this.videoSlot.currentTime||0)}},{key:"duration",get:function(){var t=this.videoSlot&&this.videoSlot.duration,e=this.config.duration;return(isNaN(t)||t<=0)&&"number"==typeof e?e:t}},{key:"paused",get:function(){return null==this.videoSlot||this.videoSlot.paused}}]);return e}(_n)},Pi={width:{},height:{},bitrate:{order:1}},Ii=Object.keys(Pi),Vi=function(t){var e=function(t){var e={};Ii.forEach(function(n){var i=Tn(n);e[n]={min:t["min"+i],max:t["max"+i]}});return e}(t);return function(t){var n=t.mediaFile;return"VPAID"===n.apiFramework||0===Ii.filter(function(t){return!function(t,e,n){var i=t[e];return null==i||i>=n.min&&i<=n.max}(n,t,e[t])}).length}},Ci=function(t,e){var n=t.mediaFile,i=t.executorIndex,r=e.mediaFile,o=e.executorIndex;if(i!==o)return i-o;for(var s=0;s<Ii.length;++s){var u=Ii[s];if(null!=n[u]&&null!=r[u]&&n[u]!==r[u])return 1===Pi[u].order?n[u]-r[u]:r[u]-n[u]}},xi=function(t,e){t.types.forEach(function(n){t.get(n).forEach(function(t){e.add(n,t)})})},Li=function(t){var e=new k;!function(t,e){t.forEach(function(t){t.errors.forEach(function(t){var n=new U;n.uri=t;e.add("vasterror",n)})});t.filter(function(t){return t.ads.length>0}).forEach(function(t){var n=t.ads.get(0);n.impressions.forEach(function(t){var n=t.uri,i=new U;i.uri=n;e.add("impression",i)});n.errors.forEach(function(t){var n=new U;n.uri=t;e.add("error",n)})})}(t,e);for(var n=0;n<t.length-1;++n)if(null!=t[n].ads&&t[n].ads.length>0){var i=t[n].ads.get(0);null!=i.creatives&&i.creatives.length>0&&xi(i.creatives.get(0).trackingEvents,e)}return e},Di={clickToResume:!1,clickToResumeHidden:!1,minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minBitrate:0,maxBitrate:1/0,videoSlot:null,container:null,videoSlotCanAutoPlay:!1,preloadVideo:!0,loadVideoTimeout:1e4,fallback:!1,adStartTimeout:5e3,adStopTimeout:5e3,executors:["vpaid-js","video"],trackingHandler:function(t,e,n){var i=function(t,e){return t.replace(Yt,function(t,n){return Xt[n.toLowerCase()](e)})}(e,n);Rt().track(i);return null},iframeDisabled:!1,iframeProperties:null,mediaFileDeliveryIgnored:!1,autoDisposeDisabled:!1,pauseBeforeExecuteDisabled:!1,videoSlotCreationDisabled:!1},Mi=["slot","slotWidth","slotHeight"],Ri=function(t,e){if("boolean"==typeof(e=Object.assign({},Di,e)).vpaidIframeDisabled){e.iframeDisabled=e.vpaidIframeDisabled;delete e.vpaidIframeDisabled}pe.init({eventCategory:e.diagnosticsEventCategory});pe.track("factory");var n=function(t){for(var e=Object.keys(t),n=0;n<e.length&&Mi.indexOf(e[n])<0;)++n;return n<e.length?e[n]:null}(e);if(null!=n)throw new Error("Option '"+n+"' no longer supported");var i=t[t.length-1],r=Li(t);try{var o=function(t){var e=t.creatives.toArray().filter(function(t){return t instanceof w||"Linear"===t.$type});if(1!==e.length)throw new be(200,"Ad must contain exactly one Linear");return e[0]}(function(t){if(null!=t.adPod)throw new be(200,"Ad pods not supported");if(0===t.ads.length)throw new be(303,"No ads found");var e=t.ads.get(0);if(!(e instanceof v||"InLine"===e.$type))throw new be(200,"Ad must be InLine");return e}(i)),s=o.duration,u=o.adParameters,a=o.icons;null!=o.trackingEvents&&xi(o.trackingEvents,r);var c=function(t,e){var n,i,r=new b;r.clickThrough=t.videoClicks.clickThrough;(n=r.clickTrackings).push.apply(n,t.videoClicks.clickTrackings);(i=r.customClicks).push.apply(i,t.videoClicks.customClicks);for(var o=0;o<e.length-1;++o)if(null!=e[o].ads&&e[o].ads.length>0){var s=e[o].ads.get(0);if(null!=s.creatives&&s.creatives.length>0){var u,a,c=s.creatives.get(0).videoClicks;(u=r.clickTrackings).push.apply(u,c.clickTrackings);(a=r.customClicks).push.apply(a,c.customClicks)}}return r}(o,t),l=function(t,e){var n=e.executors,i=e.fallback,r=n.map(function(t){return Ei[t]}),o=t.mediaFiles.map(function(t){return{mediaFile:t,executorIndex:function(t,e,n){return t.findIndex(function(t){return t.canExecute(e,n)})}(r,t,e)}}).filter(function(t){return t.executorIndex>=0}).sort(Ci),s=o.filter(Vi(e))[0];null==s&&i&&(s=o[0]);if(null==s)throw new be(403);var u=s,a=u.mediaFile,c=u.executorIndex;return[r[c],a]}(o,e),h=l[0],d=l[1],f=Object.assign({},e,{creative:o,duration:s,mediaFile:d,adParameters:u,icons:a,trackingEvents:r,videoClicks:c});pe.setDimension(101,d.type);pe.setDimension(103,d.uri);return new h(f)}catch(t){var p=e.trackingHandler;if(null!=p){r.get("vasterror").forEach(function(e){var n=e.uri;p("error",n,t)})}pe.trackError("factoryError",t);throw t}},Oi=function(t){var e="number"==typeof t.sampleRate?t.sampleRate:1;if(Math.random()<e){var n,i;pe.init({eventCategory:t.eventCategory,customDimensions:function(t){for(var e={},n=Math.min(t.length,7),i=0;i<n;i++)e[194+i]=t[i];return e}(t.dimensions),trackingConfig:{campaign:"9v528nau",placement:"qcfwbvan"},sampleRate:e});pe.track("loadedVast",((n={})[192]=t.vastUri,n),((i={})[192]=t.vastLoadTime,i))}}}).call(this,n(43),n(57).setImmediate)},57:function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;e.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)};e.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)};e.clearTimeout=e.clearInterval=function(t){t&&t.close()};function o(t,e){this._id=t;this._clearFn=e}o.prototype.unref=o.prototype.ref=function(){};o.prototype.close=function(){this._clearFn.call(i,this._id)};e.enroll=function(t,e){clearTimeout(t._idleTimeoutId);t._idleTimeout=e};e.unenroll=function(t){clearTimeout(t._idleTimeoutId);t._idleTimeout=-1};e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))};n(70);e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate;e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(54))},58:function(t,e,n){var i=n(71),r=n(72),o=n(73);t.exports=function(t,e){return i(t)||r(t,e)||o()}},59:function(t,e,n){"use strict";(function(t){e.a="undefined"==typeof window?t:window}).call(this,n(54))},60:function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},61:function(t,e){function n(e,i){t.exports=n=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return n(e,i)}t.exports=n},64:function(t,e,n){n(50);var i=n(65);function r(e,n,o){"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}};return r(e,n,o||e)}t.exports=r},65:function(t,e,n){var i=n(50);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}},70:function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o=1,s={},u=!1,a=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t;"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){h(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;t.onmessage=function(){e=!1};t.postMessage("","*");t.onmessage=n;return e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&h(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n);i=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){h(t.data)};i=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?(r=a.documentElement,i=function(t){var e=a.createElement("script");e.onreadystatechange=function(){h(t);e.onreadystatechange=null;r.removeChild(e);e=null};r.appendChild(e)}):i=function(t){setTimeout(h,0,t)};c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};s[o]=r;i(o);return o++};c.clearImmediate=l}function l(t){delete s[t]}function h(t){if(u)setTimeout(h,0,t);else{var e=s[t];if(e){u=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{l(t);u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(54),n(43))},71:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},72:function(t,e){t.exports=function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){n.push(s.value);if(e&&n.length===e)break}}catch(t){r=!0;o=t}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}return n}},73:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},77:function(t,e,n){var i=n(78);t.exports=function(t,e){if(null==t)return{};var n,r,o=i(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++){n=s[r];e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}}return o}},78:function(t,e){t.exports=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++){n=o[i];e.indexOf(n)>=0||(r[n]=t[n])}return r}}}]);
//# sourceMappingURL=https://test.corp.unrulymedia.com/native/sourcemaps/chunks/chunk-vendors~populatePlacement-d02d608675ced91bf1ba.js.map